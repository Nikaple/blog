/* tslint:disable:max-line-length */

export const blog4 = `
## è®¾è®¡æ¨¡å¼çš„è¶…ç®€åŒ–æè¿°!

è¯´æ˜Ž
====

This is the Simplified Chinese translation of [design-patterns-for-humans](https://github.com/kamranahmedse/design-patterns-for-humans). Thank [Kamran Ahmed](https://github.com/kamranahmedse) for his great work!

[design-patterns-for-humans](https://github.com/kamranahmedse/design-patterns-for-humans) æ˜¯ç”± [Kamran Ahmed](https://github.com/kamranahmedse) å‘èµ·å’Œç»´æŠ¤çš„é¡¹ç›®ï¼Œé¡¹ç›®ä»¥ç®€æ´çš„è¯­è¨€å¯¹å„ç§è®¾è®¡æ¨¡å¼è¿›è¡Œäº†æè¿°å’Œæ•´ç†ã€‚

æœ¬é¡¹ç›®æ˜¯ [design-patterns-for-humans](https://github.com/kamranahmedse/design-patterns-for-humans) é¡¹ç›®çš„ç®€ä½“ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬ã€‚ä¹Ÿæ¬¢è¿Žæ‚¨ä¸€èµ·å‚ä¸Žç¿»è¯‘å’Œæ ¡å®¡ã€‚

æœ¬é¡¹ç›®çš„è¿›åº¦å’Œè´¡çŒ®è€…å°†åœ¨æ–‡æœ«åˆ—å‡ºã€‚

å½“å‰ç¿»è¯‘çš„åŽŸæ–‡ç‰ˆæœ¬æ˜¯ [5cf37f7](https://github.com/kamranahmedse/design-patterns-for-humans/commit/b9a53a87a4026cb0b8e76feba72a91ecfcdf4f45)


ðŸš€  ç®€ä»‹
=================

è®¾è®¡æ¨¡å¼æ˜¯ç»å¸¸æ€§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ; **æ˜¯å¦‚ä½•è§£å†³ç‰¹å®šé—®é¢˜çš„æŒ‡å¯¼æ–¹é’ˆ**ã€‚å®ƒä»¬ä¸æ˜¯ç±»ã€åŒ…æˆ–åº“ï¼Œåªè¦åŠ åˆ°ç¨‹åºä¸­å°±èƒ½èµ·ä½œç”¨ã€‚å®ƒä»¬æ˜¯å…³äºŽå¦‚ä½•åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹è§£å†³ç‰¹å®šé—®é¢˜çš„æŒ‡å¯¼æ–¹é’ˆã€‚

> è®¾è®¡æ¨¡å¼æ˜¯ç»å¸¸æ€§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ; æ˜¯å¦‚ä½•è§£å†³ç‰¹å®šé—®é¢˜çš„æŒ‡å¯¼æ–¹é’ˆã€‚

Wikipedia ä¸Šæè¿°ä¸º

> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè½¯ä»¶è®¾è®¡æ¨¡å¼æ˜¯åœ¨è½¯ä»¶è®¾è®¡çš„ç»™å®šä¸Šä¸‹æ–‡ä¸­ï¼Œé’ˆå¯¹æ™®éé—®é¢˜çš„ä¸€ç§é€šç”¨ä¸”å¯é‡ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸æ˜¯ä¸€ä¸ªå·²å®Œæˆçš„è®¾è®¡ï¼Œä¸èƒ½ç›´æŽ¥è½¬åŒ–æˆæºç æˆ–æœºå™¨ç ã€‚å®ƒæ˜¯å°±å¦‚ä½•è§£å†³æŸä¸ªé—®é¢˜ï¼Œä¸”èƒ½ç”¨äºŽè®¸å¤šä¸åŒæƒ…å†µçš„ä¸€ç§æè¿°æˆ–æ¨¡æ¿ã€‚

âš ï¸ æ³¨æ„
-----------------
- è®¾è®¡æ¨¡å¼ä¸æ˜¯èƒ½è§£å†³æ‰€æœ‰é—®é¢˜çš„ä¸‡èƒ½é’¥åŒ™ã€‚
- ä¸è¦å¼ºè¿«ä½¿ç”¨: å¦‚æžœè¿™æ ·ï¼Œå¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚è¯·è®°ä½è®¾è®¡æ¨¡å¼æ˜¯ **è§£å†³** é—®é¢˜çš„æ–¹æ¡ˆï¼Œä¸æ˜¯ **å¯»æ‰¾** é—®é¢˜çš„æ–¹æ¡ˆ; å› æ­¤ä¸è¦è€ƒè™‘è¿‡å¤´äº†ã€‚
- å¦‚æžœåœ¨é€‚åˆçš„åœ°æ–¹ä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨ï¼Œå®ƒä»¬ä¼šå¾ˆæœ‰æ•ˆ; å¦åˆ™å®ƒä»¬å¯èƒ½ä¼šå¯¼è‡´ä½ çš„ä»£ç æžåº¦æ··ä¹±ã€‚

> åŒæ—¶æ³¨æ„ä¸‹é¢çš„ä»£ç ç¤ºä¾‹éƒ½æ˜¯ç”¨ PHP-7 å†™çš„ã€‚ä½†è¿™é—®é¢˜ä¹Ÿä¸ä¼šå¾ˆå¤§ï¼Œå› ä¸ºæ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦å¤– **æ”¯æŒå…¶å®ƒè¯­è¨€çš„å·¥ä½œæ­£åœ¨è¿›è¡Œä¸­**ã€‚

è®¾è®¡æ¨¡å¼çš„ç±»åž‹
-----------------

* [åˆ›å»ºåž‹](#åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼)
* [ç»“æž„åž‹](#ç»“æž„åž‹è®¾è®¡æ¨¡å¼)
* [è¡Œä¸ºåž‹](#è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼)

åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼
==========================

ç®€å•æ¥è¯´
> åˆ›å»ºåž‹æ¨¡å¼å…³æ³¨äºŽå¦‚ä½•å®žä¾‹åŒ–ä¸€ä¸ªæˆ–ä¸€ç»„ç›¸å…³å¯¹è±¡ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œåˆ›å»ºåž‹è®¾è®¡æ¨¡å¼æ˜¯å¤„ç†å¯¹è±¡åˆ›å»ºæœºåˆ¶ï¼Œè®¾æ³•ä»¥é€‚åˆå½“å‰æƒ…å†µçš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡çš„è®¾è®¡æ¨¡å¼ã€‚å¯¹è±¡åˆ›å»ºæ—¶è‹¥ä½¿ç”¨ä¸€èˆ¬å½¢å¼å¯èƒ½ä¼šå¯¼è‡´è®¾è®¡éš¾é¢˜æˆ–å¢žåŠ è®¾è®¡çš„å¤æ‚åº¦ã€‚åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼é€šè¿‡å¯¹å¯¹è±¡åˆ›å»ºè¿‡ç¨‹çš„æŽ§åˆ¶ä»¥è§£å†³æ­¤é—®é¢˜ã€‚

 * [ç®€å•å·¥åŽ‚(Simple Factory)](#-ç®€å•å·¥åŽ‚simple-factory)
 * [å·¥åŽ‚æ–¹æ³•(Factory Method)](#-å·¥åŽ‚æ–¹æ³•factory-method)
 * [æŠ½è±¡å·¥åŽ‚(Abstract Factory)](#-æŠ½è±¡å·¥åŽ‚abstract-factory)
 * [å»ºé€ è€…(Builder)](#-å»ºé€ è€…builder)
 * [åŽŸåž‹(Prototype)](#-åŽŸåž‹prototype)
 * [å•ä¾‹(Singleton)](#-å•ä¾‹singleton)

ðŸ  ç®€å•å·¥åŽ‚(Simple Factory)
--------------
çŽ°å®žæ¡ˆä¾‹
> å‡è®¾ä½ æ­£åœ¨å»ºæˆ¿ï¼Œéœ€è¦ç”¨åˆ°é—¨ã€‚å¦‚æžœæ¯æ¬¡éœ€è¦é—¨æ—¶ï¼Œä½ éƒ½ç©¿ä¸Šæœ¨åŒ æœåœ¨æˆ¿å­é‡Œäº²è‡ªåˆ¶ä½œï¼Œè‚¯å®šä¼šå¯¼è‡´ä¸€å›¢ç³Ÿã€‚è¿™ç§æƒ…å†µä¸‹ä½ éœ€è¦å°†é—¨æ”¾åœ¨å·¥åŽ‚é‡Œåˆ¶ä½œã€‚

ç®€å•æ¥è¯´
> ç®€å•å·¥åŽ‚æ¨¡å¼å¯¹å®¢æˆ·éšè—äº†æ‰€æœ‰çš„å®žä¾‹åŒ–é€»è¾‘ï¼Œåªç®€å•åœ°ä¸ºå®¢æˆ·åˆ›å»ºå®žä¾‹ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ (OOP) ä¸­ï¼Œå·¥åŽ‚å°±æ˜¯ä¸€ä¸ªç”¨äºŽåˆ›å»ºå…¶å®ƒå¯¹è±¡çš„å¯¹è±¡,  â€“ å½¢å¼ä¸Šå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ï¼Œå®ƒåœ¨è¢«æ–¹æ³•è°ƒç”¨æ—¶ï¼ˆå‡è®¾é€šè¿‡ "new"ï¼‰ä¼šè¿”å›žä¸åŒåŽŸåž‹æˆ–ç±»çš„å¯¹è±¡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

é¦–å…ˆå®šä¹‰é—¨çš„æŽ¥å£åŠå…¶å®žçŽ°

\`\`\`php
interface Door {
    public function getWidth() : float;
    public function getHeight() : float;
}

class WoodenDoor implements Door {
    protected $width;
    protected $height;

    public function __construct(float $width, float $height) {
        $this->width = $width;
        $this->height = $height;
    }

    public function getWidth() : float {
        return $this->width;
    }

    public function getHeight() : float {
        return $this->height;
    }
}
\`\`\`

ç„¶åŽå®šä¹‰é—¨çš„å·¥åŽ‚ï¼Œå®ƒåˆ›å»ºå¹¶è¿”å›žé—¨å®žä¾‹

\`\`\`php
class DoorFactory {
   public static function makeDoor($width, $height) : Door {
       return new WoodenDoor($width, $height);
   }
}
\`\`\`

å†è¿™æ ·ä½¿ç”¨

\`\`\`php
$door = DoorFactory::makeDoor(100, 200);
echo 'Width: ' . $door->getWidth();
echo 'Height: ' . $door->getHeight();
\`\`\`

**ä½•æ—¶ç”¨ï¼Ÿ**

å½“åˆ›å»ºå¯¹è±¡ä¸ä»…åªæ˜¯ä¸€äº›èµ‹å€¼æ“ä½œï¼Œè¿˜æ¶‰åŠä¸€äº›é€»è¾‘æ“ä½œæ—¶ï¼Œå°±é€‚åˆå°†è¿™äº›é€»è¾‘æ”¾åˆ°ä¸€ä¸ªä¸“é—¨çš„å·¥åŽ‚ä¸­ï¼Œä»Žè€Œèƒ½é¿å…ä»£ç é‡å¤ã€‚

ðŸ­ å·¥åŽ‚æ–¹æ³•(Factory Method)
--------------

çŽ°å®žæ¡ˆä¾‹
> è€ƒè™‘äººäº‹æ‹›è˜ç»ç†çš„æƒ…å†µã€‚ä¸€ä¸ªäººä¸å¯èƒ½å‚ä¸Žå¯¹æ¯ä¸ªèŒä½çš„é¢è¯•ã€‚æ ¹æ®èŒä½ç©ºç¼ºï¼Œå¥¹å¿…é¡»å†³å®šå°†é¢è¯•å·¥ä½œå§”æ´¾ç»™ä¸åŒçš„äººæ¥å®Œæˆã€‚

ç®€å•æ¥è¯´
> å®ƒæä¾›äº†ä¸€ç§èƒ½å°†å®žä¾‹åŒ–é€»è¾‘å§”æ´¾åˆ°å­ç±»ä¸­å®Œæˆçš„æ–¹å¼ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨åŸºäºŽç±»çš„ç¼–ç¨‹ä¸­ï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºåž‹æ¨¡å¼ï¼Œå®ƒæ— éœ€æŒ‡å®šå°†è¦åˆ›é€ çš„å¯¹è±¡çš„å…·ä½“ç±»ï¼Œåªä½¿ç”¨å·¥åŽ‚ä¸­çš„å„ç§æ–¹æ³•å°±èƒ½å¤„ç†å¯¹è±¡åˆ›å»ºçš„é—®é¢˜ã€‚å¯¹è±¡çš„åˆ›å»ºæ˜¯é€šè¿‡è°ƒç”¨å·¥åŽ‚æ–¹æ³•è€Œéžæž„é€ å™¨æ¥å®Œæˆçš„ï¼Œå·¥åŽ‚æ–¹æ³•â€”è¦ä¹ˆåœ¨æŽ¥å£ä¸­å®šä¹‰ç„¶åŽç”±å­ç±»å®žçŽ°ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸºç±»ä¸­å®žçŽ°ç„¶åŽè¢«ç»§æ‰¿ç±»é‡è½½ã€‚

 **ç¼–ç¨‹ç¤ºä¾‹**

ç»§ç»­ä¸Šé¢çš„äººäº‹æ‹›è˜ç»ç†çš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰é¢è¯•æŽ¥å£å¹¶ç»™å‡ºäº†å‡ ä¸ªå®žçŽ°

\`\`\`php
interface Interviewer {
    public function askQuestions();
}

class Developer implements Interviewer {
    public function askQuestions() {
        echo 'Asking about design patterns!';
    }
}

class CommunityExecutive implements Interviewer {
    public function askQuestions() {
        echo 'Asking about community building';
    }
}
\`\`\`

çŽ°åœ¨è®©æˆ‘ä»¬åˆ›å»º \`HiringManager\`

\`\`\`php
abstract class HiringManager {

    // Factory method
    abstract public function makeInterviewer() : Interviewer;

    public function takeInterview() {
        $interviewer = $this->makeInterviewer();
        $interviewer->askQuestions();
    }
}
\`\`\`

çŽ°åœ¨ä»»ä½•å­ç±»éƒ½å¯ä»¥æ‰©å±•å¹¶æä¾›æ‰€éœ€çš„é¢è¯•æŽ¥å£

\`\`\`php
class DevelopmentManager extends HiringManager {
    public function makeInterviewer() : Interviewer {
        return new Developer();
    }
}

class MarketingManager extends HiringManager {
    public function makeInterviewer() : Interviewer {
        return new CommunityExecutive();
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
$devManager = new DevelopmentManager();
$devManager->takeInterview(); // Output: Asking about design patterns

$marketingManager = new MarketingManager();
$marketingManager->takeInterview(); // Output: Asking about community building.
\`\`\`

**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

é€‚åˆæ—¶å½“ç±»ä¸­å­˜åœ¨ä¸€äº›é€šç”¨æ“ä½œï¼Œä½†æ˜¯æ‰€éœ€çš„å­ç±»æ˜¯åœ¨è¿è¡Œæ—¶æ‰åŠ¨æ€å†³å®šçš„æƒ…å†µã€‚æ¢å¥è¯è¯´ï¼Œå³å½“å®¢æˆ·æ— æ³•çŸ¥é“æ‰€éœ€çš„ç¡®åˆ‡å­ç±»æ—¶ã€‚

ðŸ”¨ æŠ½è±¡å·¥åŽ‚(Abstract Factory)
----------------

çŽ°å®žæ¡ˆä¾‹
> ç»§ç»­ç®€å•å·¥åŽ‚æ¨¡å¼ä¸­é—¨çš„ä¾‹å­ã€‚åŸºäºŽä½ çš„éœ€æ±‚ï¼Œä½ å¯èƒ½è¦ä»Žæœ¨é—¨åº—èŽ·å–æœ¨é—¨ï¼Œä»Žé“é—¨åº—èŽ·å–é“é—¨ï¼Œæˆ–è€…ä»Ž PVC ç›¸å…³åº—èŽ·å– PVC é—¨ã€‚å¦å¤–ä½ å¯èƒ½è¿˜è¦æ‰¾ä¸åŒä¸“é•¿çš„äººæ¥å®‰è£…é—¨ï¼Œä¾‹å¦‚æ‰¾æœ¨åŒ æ¥å®‰è£…æœ¨é—¨ï¼Œæ‰¾ç”µç„Šå·¥æ¥å®‰è£…é“é—¨ç­‰ç­‰ã€‚å¯ä»¥çœ‹åˆ°çŽ°åœ¨é—¨å·²ç»æœ‰äº†ä¾èµ–æ€§ï¼Œæ¯”å¦‚æœ¨é—¨ä¾èµ–äºŽæœ¨åŒ ï¼Œé“é—¨ä¾èµ–äºŽç”µç„Šå·¥ç­‰ã€‚

ç®€å•æ¥è¯´
> å°±æ˜¯å·¥åŽ‚çš„å·¥åŽ‚; è¯¥å·¥åŽ‚å°†å„ä¸ªç›¸å…³/ç›¸ä¾èµ–çš„å·¥åŽ‚ç»„åˆèµ·æ¥ï¼Œè€Œæ— éœ€æŒ‡å®šä»–ä»¬å…·ä½“çš„ç±»ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> æŠ½è±¡å·¥åŽ‚æ¨¡å¼æä¾›äº†ä¸€ç§å°†å…·æœ‰ç›¸åŒé£Žæ ¼çš„ä¸€ç»„å·¥åŽ‚å°é—­èµ·æ¥çš„æ–¹æ³•ï¼Œè€Œæ— éœ€æŒ‡å®šå„å·¥åŽ‚å…·ä½“çš„ç±»ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä¿®æ”¹ä¸Šé¢é—¨çš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰ \`Door\` æŽ¥å£å¹¶åšå‡ºå‡ ä¸ªå®žçŽ°

\`\`\`php
interface Door {
    public function getDescription();
}

class WoodenDoor implements Door {
    public function getDescription() {
        echo 'I am a wooden door';
    }
}

class IronDoor implements Door {
    public function getDescription() {
        echo 'I am an iron door';
    }
}
\`\`\`

ç„¶åŽä¸ºæ¯ç§é—¨éƒ½å®šä¹‰ç›¸åº”çš„å®‰è£…äººå‘˜

\`\`\`php
interface DoorFittingExpert {
    public function getDescription();
}

class Welder implements DoorFittingExpert {
    public function getDescription() {
        echo 'I can only fit iron doors';
    }
}

class Carpenter implements DoorFittingExpert {
    public function getDescription() {
        echo 'I can only fit wooden doors';
    }
}
\`\`\`

çŽ°åœ¨å®šä¹‰æˆ‘ä»¬çš„æŠ½è±¡å·¥åŽ‚ï¼Œå®ƒèƒ½ä¸ºæˆ‘ä»¬åˆ›å»ºç›¸å…³çš„ä¸€ç»„å¯¹è±¡ï¼Œä¾‹å¦‚æœ¨é—¨å·¥åŽ‚å°†ä¼šåˆ›å»ºæœ¨é—¨åŠæœ¨é—¨å®‰è£…äººå‘˜å¯¹è±¡ï¼Œè€Œé“é—¨å·¥åŽ‚å°†ä¼šåˆ›å»ºé“é—¨åŠé“é—¨å®‰è£…äººå‘˜å¯¹è±¡ã€‚

\`\`\`php
interface DoorFactory {
    public function makeDoor() : Door;
    public function makeFittingExpert() : DoorFittingExpert;
}

// æœ¨é—¨å·¥åŽ‚å°†è¿”å›žæœ¨åŒ åŠæœ¨é—¨å¯¹è±¡
class WoodenDoorFactory implements DoorFactory {
    public function makeDoor() : Door {
        return new WoodenDoor();
    }

    public function makeFittingExpert() : DoorFittingExpert{
        return new Carpenter();
    }
}

// é“é—¨å·¥åŽ‚å°†è¿”å›žé“é—¨åŠç›¸åº”çš„å®‰è£…äººå‘˜
class IronDoorFactory implements DoorFactory {
    public function makeDoor() : Door {
        return new IronDoor();
    }

    public function makeFittingExpert() : DoorFittingExpert{
        return new Welder();
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
$woodenFactory = new WoodenDoorFactory();

$door = $woodenFactory->makeDoor();
$expert = $woodenFactory->makeFittingExpert();

$door->getDescription();  // Output: I am a wooden door
$expert->getDescription(); // Output: I can only fit wooden doors

// Same for Iron Factory
$ironFactory = new IronDoorFactory();

$door = $ironFactory->makeDoor();
$expert = $ironFactory->makeFittingExpert();

$door->getDescription();  // Output: I am an iron door
$expert->getDescription(); // Output: I can only fit iron doors
\`\`\`

å¯ä»¥çœ‹åˆ°æœ¨é—¨å·¥åŽ‚å·²ç»å°è£…äº† \`æœ¨åŒ \` å’Œ \`æœ¨é—¨\` è€Œé“é—¨å·¥åŽ‚å·²ç»å°é—­äº† \`é“é—¨\` å’Œ \`ç”µç„Šå·¥\`ã€‚è¿™æ ·å®ƒå°±èƒ½ç¡®ä¿ï¼Œæ¯æ¬¡åˆ›å»ºäº†ä¸€ä¸ªé—¨å¯¹è±¡åŽï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°å…¶ç›¸åº”çš„å®‰è£…äººå‘˜å¯¹è±¡ã€‚

**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“åˆ›å»ºé€»è¾‘æœ‰ç‚¹å¤æ‚ä½†å†…éƒ¨åˆç›¸äº’å…³è”æ—¶ä½¿ç”¨ã€‚

ðŸ‘· åˆ›é€ è€…(Builder)
--------------------------------------------

çŽ°å®žæ¡ˆä¾‹
> å‡è®¾ä½ åœ¨ Harees(ç¾Žå›½è¿žé”å¿«é¤åº—)ï¼Œä½ ä¸‹äº†å•ï¼Œå‡å®šè¯´è¦æ¥ä»½ "å¤§ä»½è£…"ï¼Œç„¶åŽåº—å‘˜ *æ— éœ€å†å¤šé—®* å°±ç›´æŽ¥ä¸ºä½ é€ä¸Š "å¤§ä»½è£…"; åƒè¿™æ ·çš„å°±æ˜¯ç®€å•å·¥åŽ‚æ¨¡å¼çš„ä¾‹å­ã€‚ä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹åˆ›å»ºé€»è¾‘å¯èƒ½è¦æ¶‰åŠå¤šä¸ªæ­¥éª¤ã€‚ä¾‹å¦‚ä½ æƒ³è¦ä¸€ä»½å®šåˆ¶é¤ï¼Œä½ ç»™å‡ºäº†å¦‚ä½•åšæ±‰å ¡çš„å…·ä½“è¦æ±‚ï¼Œä¾‹å¦‚ä½¿ç”¨ä»€ä¹ˆé¢åŒ…ï¼Œä½¿ç”¨ä½•ç§é…±æ±ï¼Œä½•ç§å¥¶é…ªç­‰ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹å°±éœ€è¦ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚

ç®€å•æ¥è¯´
> å®ƒå…è®¸ä½ åˆ›å»º â€ä¸åŒå£å‘³" çš„å¯¹è±¡ï¼ŒåŒæ—¶åˆèƒ½é¿å… â€œæ±¡æŸ“â€ æž„é€ å‡½æ•°çš„å‚æ•°ã€‚é€‚åˆå½“æŸå¯¹è±¡å¯èƒ½ä¼šæœ‰å¤šç§ â€œå£å‘³"ï¼Œæˆ–è€…å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹æ¶‰åŠå¤šä¸ªæ­¥éª¤æ—¶ä½¿ç”¨ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºçš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ„åœ¨ä¸ºé‡å æž„é€ å™¨è¿™ç§åæ¨¡å¼(telescoping constructor anti-pattern)æ‰¾åˆ°ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚

æ—¢ç„¶è¯´åˆ°äº†ï¼Œé‚£è®©æˆ‘å¤šè¯´å‡ å¥ä»€ä¹ˆæ˜¯é‡å æž„é€ å™¨åæ¨¡å¼(telescoping constructor anti-pattern)ã€‚æˆ‘ä»¬æˆ–å¤šæˆ–å°‘æœ‰çœ‹åˆ°è¿‡åƒè¿™æ ·çš„æž„é€ å‡½æ•°ï¼š

\`\`\`php
public function __construct($size, $cheese = true, $pepperoni = true, $tomato = false, $lettuce = true) {
}
\`\`\`

å¯ä»¥çœ‹åˆ°; æž„é€ å‡½æ•°çš„å‚æ•°ä¸ªæ•°å¾ˆå¿«ä¼šå˜å¾—ä¸€å‘ä¸å¯æ”¶æ‹¾ï¼Œä»Žè€Œè¦ç†è§£å‚æ•°å¸ƒå±€ä¼šå˜å¾—å›°éš¾ã€‚å¦å¤–å‡å¦‚ä»¥åŽè¿˜è¦æ·»åŠ æ›´å¤šåŠŸèƒ½çš„è¯ï¼Œè¯¥å‚æ•°åˆ—è¡¨è¿˜ä¼šç»§ç»­å¢žé•¿ã€‚è¿™å°±æ˜¯æ‰€è°“çš„é‡å æž„é€ å™¨åæ¨¡å¼(telescoping constructor anti-pattern)ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç†æ™ºåœ°é€‰æ‹©æ˜¯ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚é¦–å…ˆå®šä¹‰æˆ‘ä»¬éœ€è¦åˆ¶ä½œçš„æ±‰å ¡ç±»

\`\`\`php
class Burger {
    protected $size;

    protected $cheese = false;
    protected $pepperoni = false;
    protected $lettuce = false;
    protected $tomato = false;

    public function __construct(BurgerBuilder $builder) {
        $this->size = $builder->size;
        $this->cheese = $builder->cheese;
        $this->pepperoni = $builder->pepperoni;
        $this->lettuce = $builder->lettuce;
        $this->tomato = $builder->tomato;
    }
}
\`\`\`

ç„¶åŽå®šä¹‰å»ºé€ è€…ç±»

\`\`\`php
class BurgerBuilder {
    public $size;

    public $cheese = false;
    public $pepperoni = false;
    public $lettuce = false;
    public $tomato = false;

    public function __construct(int $size) {
        $this->size = $size;
    }

    public function addPepperoni() {
        $this->pepperoni = true;
        return $this;
    }

    public function addLettuce() {
        $this->lettuce = true;
        return $this;
    }

    public function addCheese() {
        $this->cheese = true;
        return $this;
    }

    public function addTomato() {
        $this->tomato = true;
        return $this;
    }

    public function build() : Burger {
        return new Burger($this);
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨:

\`\`\`php
$burger = (new BurgerBuilder(14))
                    ->addPepperoni()
                    ->addLettuce()
                    ->addTomato()
                    ->build();
\`\`\`

**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“æŸä¸ªå¯¹è±¡å¯èƒ½ä¼šæœ‰å¤šç§ "å£å‘³"ï¼Œæˆ–è€…æƒ³é¿å…é‡å æž„é€ å™¨åæ¨¡å¼(telescoping constructor anti-pattern) æ—¶ä½¿ç”¨ã€‚å®ƒä¸Žå·¥åŽ‚æ¨¡å¼çš„ä¸»è¦åŒºåˆ«åœ¨äºŽï¼šå·¥åŽ‚æ¨¡å¼é€‚ç”¨äºŽåˆ›å»ºè¿‡ç¨‹åªæœ‰ä¸€ä¸ªæ­¥éª¤çš„æƒ…å†µï¼Œè€Œå»ºé€ è€…æ¨¡å¼é€‚ç”¨äºŽåˆ›å»ºè¿‡ç¨‹æ¶‰åŠå¤šä¸ªæ­¥éª¤çš„æƒ…å†µã€‚

ðŸ‘ åŽŸåž‹(Prototype)
------------

çŽ°å®žæ¡ˆä¾‹
> è¿˜è®°å¾—å¤šèŽ‰å—ï¼Ÿé‚£åªå…‹éš†ç¾Šï¼æˆ‘ä»¬å…ˆä¸è¦å…³æ³¨ç»†èŠ‚ï¼Œä½†æ˜¯è¿™é‡Œçš„é‡ç‚¹æ˜¯å…‹éš†ã€‚

ç®€å•æ¥è¯´
> æ ¹æ®æŸä¸ªçŽ°å­˜çš„å¯¹è±¡ï¼Œé€šè¿‡å…‹éš†æ¥åˆ›å»ºå¯¹è±¡ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åŽŸåž‹æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ã€‚å®ƒç”¨äºŽå½“æ‰€éœ€åˆ›å»ºçš„å¯¹è±¡çš„ç±»åž‹æ˜¯ç”±æŸä¸ªåŽŸåž‹å®žä¾‹å†³å®šçš„æƒ…å†µï¼Œå¹¶é€šè¿‡å…‹éš†è¯¥åŽŸåž‹å®žä¾‹æ¥äº§ç”Ÿæ–°çš„å¯¹è±¡ã€‚

ç®€å•æ¥è¯´ï¼Œå®ƒèƒ½è®©ä½ åˆ›å»ºæŸä¸ªçŽ°æœ‰å¯¹è±¡çš„å…‹éš†ç‰ˆæœ¬ï¼Œç„¶åŽä½ å¯æŒ‰éœ€å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œä»Žè€Œé¿å…äº†ä»Žæ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å¯¹å…¶è¿›è¡Œè®¾ç½®çš„æ‰€æœ‰éº»çƒ¦ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

åœ¨ PHP ä¸­, å¯ä»¥éžå¸¸å®¹æ˜“åœ°ä½¿ç”¨ \`clone\` å®žçŽ°

\`\`\`php
class Sheep {
    protected $name;
    protected $category;

    public function __construct(string $name, string $category = 'Mountain Sheep') {
        $this->name = $name;
        $this->category = $category;
    }

    public function setName(string $name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }

    public function setCategory(string $category) {
        $this->category = $category;
    }

    public function getCategory() {
        return $this->category;
    }
}
\`\`\`

ç„¶åŽåƒä¸‹é¢è¿™æ ·è¿›è¡Œå…‹éš†

\`\`\`php
$original = new Sheep('Jolly');
echo $original->getName(); // Jolly
echo $original->getCategory(); // Mountain Sheep

// Clone and modify what is required
$cloned = clone $original;
$cloned->setName('Dolly');
echo $cloned->getName(); // Dolly
echo $cloned->getCategory(); // Mountain sheep
\`\`\`

å¦å¤–ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç‰¹æ®Šæ–¹æ³• \`__clone\` æ¥å®šåˆ¶å…‹éš†è¡Œä¸ºã€‚

**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“æ‰€éœ€å¯¹è±¡å’ŒæŸä¸ªçŽ°å­˜å¯¹è±¡éžå¸¸ç›¸ä¼¼æ—¶ï¼Œæˆ–è€…å½“åˆ›å»ºæ“ä½œç›¸æ¯”å…‹éš†èŠ±é”€æ›´å¤§æ—¶ã€‚

ðŸ’ å•ä¾‹(Singleton)
------------

çŽ°å®žæ¡ˆä¾‹
> ä¸€ä¸ªå›½å®¶åœ¨åŒä¸€æ—¶æœŸåªèƒ½æœ‰ä¸€ä½æ€»ç»Ÿã€‚å½“éœ€è¦æ‹…èµ·è´£ä»»æ—¶ï¼Œéƒ½æ˜¯è¿™ä½æ€»ç»Ÿå®žæ–½è¡ŒåŠ¨çš„ã€‚è¿™é‡Œæ€»ç»Ÿå°±æ˜¯å•ä¾‹ã€‚

ç®€å•æ¥è¯´
> å®ƒèƒ½ç¡®ä¿æŸä¸ªç±»æ°¸è¿œåªèƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒé™åˆ¶æŸä¸ªç±»åªèƒ½å®žä¾‹åŒ–æˆä¸€ä¸ªå¯¹è±¡ã€‚å½“ç³»ç»Ÿä¸­éœ€è¦ç¡®åˆ‡ä¸€ä¸ªå¯¹è±¡æ¥åè°ƒè¡Œä¸ºæ—¶ï¼Œå•ä¾‹æ˜¯å¾ˆé€‚åˆçš„ã€‚

å•ä¾‹æ¨¡å¼å®žé™…ä¸Šè¢«è®¤ä¸ºæ˜¯ä¸€ç§åæ¨¡å¼ï¼Œå› æ­¤éœ€é¿å…è¿‡åº¦ä½¿ç”¨ã€‚å®ƒä¸ä¸€å®šå°±æ˜¯ä¸å¥½çš„ï¼Œå®ƒæœ‰å®ƒçš„é€‚ç”¨æƒ…å†µï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åº”å½“å½“å¿ƒï¼Œå› ä¸ºå®ƒåœ¨ä½ çš„ç¨‹åºä¸­å¼•ç”¨äº†ä¸€ä¸ªå…¨å±€çŠ¶æ€ï¼Œå› æ­¤åœ¨æŸå¤„å¯¹å®ƒçš„ä¿®æ”¹å¯èƒ½ä¼šå½±å“å…¶å®ƒåœ°æ–¹ï¼Œä»Žè€Œå¯¹å®ƒè¿›è¡Œè°ƒè¯•ä¼šå˜å¾—ç›¸å½“å›°éš¾ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

åˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œå°†æž„é€ å™¨è®¾ä¸ºç§æœ‰ï¼Œç¦ç”¨å…‹éš†åŠŸèƒ½ï¼Œç¦æ­¢æ‰©å±•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªé™æ€å˜é‡æ¥ä¿å­˜å®žä¾‹

\`\`\`php
final class President {
    private static $instance;

    private function __construct() {
        // Hide the constructor
    }

    public static function getInstance() : President {
        if (!self::$instance) {
            self::$instance = new self();
        }

        return self::$instance;
    }

    private function __clone() {
        // Disable cloning
    }

    private function __wakeup() {
        // Disable unserialize
    }
}
\`\`\`

ç„¶åŽè¿™æ ·ä½¿ç”¨

\`\`\`php
$president1 = President::getInstance();
$president2 = President::getInstance();

var_dump($president1 === $president2); // true
\`\`\`

ç»“æž„åž‹è®¾è®¡æ¨¡å¼
==========================

ç®€å•æ¥è¯´
> ç»“æž„åž‹æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡çš„ç»„åˆæˆ–è€…æ¢å¥è¯è¯´æ˜¯å®žä½“é—´å¦‚ä½•èƒ½å¤Ÿç›¸äº’ä½¿ç”¨ã€‚æˆ–è€…ä¹Ÿå¯ä»¥å¦å¤–è§£é‡Šä¸ºï¼Œå®ƒä»¬æœ‰åŠ©äºŽå›žç­” "å¦‚ä½•æž„å»ºä¸€ä¸ªè½¯ä»¶ç»„ä»¶?â€œã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç»“æž„åž‹è®¾è®¡æ¨¡å¼æ˜¯è¿™æ ·çš„ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œå®ƒä»¬é€šè¿‡æŸç§ç®€æ˜Žçš„æ–¹å¼æ¥å®žçŽ°å®žä½“é—´çš„å…³ç³»ï¼Œä»Žè€Œå‡å°‘è®¾è®¡çš„éš¾åº¦ã€‚

 * [é€‚é…å™¨(Adapter)](#-é€‚é…å™¨adapter)
 * [æ¡¥æŽ¥(Bridge)](#-æ¡¥æŽ¥bridge)
 * [ç»„åˆ(Composite)](#-ç»„åˆcomposite)
 * [è£…é¥°å™¨(Decorator)](#-è£…é¥°å™¨decorator)
 * [å¤–è§‚(Facade)](#-å¤–è§‚facade)
 * [äº«å…ƒ(Flyweight)](#-äº«å…ƒflyweight)
 * [ä»£ç†(Proxy)](#-ä»£ç†proxy)

ðŸ”Œ é€‚é…å™¨(Adapter)
-------

çŽ°å®žæ¡ˆä¾‹
> å‡è®¾ä½ çš„å†…å­˜å¡é‡Œæœ‰ä¸€äº›ç…§ç‰‡ï¼Œä½ éœ€è¦å°†å®ƒä»¬ä¼ åˆ°ç”µè„‘ä¸Šã€‚è¦å®Œæˆä¼ è¾“ï¼Œä½ éœ€è¦æœ‰ä¸Žä½ çš„ç”µè„‘æŽ¥å£å…¼å®¹çš„é€‚é…å™¨ï¼Œè¿™æ ·ä½ æ‰èƒ½å°†å†…å­˜å¡ä¸Žä½ çš„ç”µè„‘è¿žæŽ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹è¯»å¡å™¨å°±æ˜¯ä¸€ä¸ªé€‚é…å™¨ã€‚
> å¦ä¸€ä¸ªä¾‹å­å°±æ˜¯å¤§å®¶éƒ½çŸ¥é“çš„ç”µæºé€‚é…å™¨; ä¸€ä¸ªä¸‰è„šæ’å¤´æ— æ³•æ’åˆ°ä¸¤å£çš„æ’åº§ä¸Šï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªç”µæºé€‚é…å™¨æ‰èƒ½å°†å®ƒä¸Žä¸¤å£æ’åº§è¿žæŽ¥ã€‚
> è¿˜æœ‰ä¸€ä¸ªä¾‹å­å°±æ˜¯ç¿»è¯‘ï¼Œä»–èƒ½å°†ä¸€ä¸ªäººè¯´çš„è¯ç¿»è¯‘ç»™å¦ä¸€ä¸ªå¬ã€‚

ç®€å•æ¥è¯´
> é€‚é…å™¨æ¨¡å¼å…è®¸ä½ åœ¨é€‚é…å™¨ä¸­å°è£…å…¶å®ƒä¸å…¼å®¹çš„å¯¹è±¡ï¼Œä»Žè€Œä½¿å®ƒä»¬ä¸ŽæŸäº›ç±»å…¼å®¹ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œé€‚é…å™¨è¿™ç§è½¯ä»¶è®¾è®¡æ¨¡å¼å…è®¸å°†çŽ°æœ‰ç±»çš„æŽ¥å£è½¬æˆå¦ä¸€ç§æŽ¥å£æ¥ä½¿ç”¨ã€‚å®ƒé€šå¸¸ç”¨äºŽä½¿çŽ°æœ‰ç±»åœ¨æ— éœ€ä¿®æ”¹å…¶æºç çš„æƒ…å†µä¸‹ï¼Œä¸Žå…¶å®ƒç±»å®žçŽ°åä½œã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å‡è®¾çŽ°æœ‰ä¸€æ¬¾å…³äºŽçŒŽäººçŒŽç‹®çš„æ¸¸æˆã€‚

é¦–å…ˆå®šä¹‰ \`Lion\` æŽ¥å£å¹¶å®žçŽ°æ‰€æœ‰ç§ç±»çš„ç‹®å­ç±»

\`\`\`php
interface Lion {
    public function roar();
}

class AfricanLion implements Lion {
    public function roar() {}
}

class AsianLion implements Lion {
    public function roar() {}
}
\`\`\`

çŒŽäººåªæœ‰å½“çœ‹åˆ°å®žçŽ°äº† \`Lion\` æŽ¥å£çš„çŒŽç‰©åŽæ‰èƒ½ç‹©çŒŽã€‚

\`\`\`php
class Hunter {
    public function hunt(Lion $lion) {
    }
}
\`\`\`

çŽ°å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨æ¸¸æˆä¸­åŠ å…¥ \`WildDog\`ï¼Œä½¿çŒŽäººå¯¹å®ƒä»¬ä¹Ÿèƒ½è¿›è¡Œç‹©çŒŽã€‚ä½†æ˜¯æˆ‘ä»¬æ— æ³•ç›´æŽ¥å®žçŽ°ï¼Œå› ä¸ºç‹—å…·æœ‰ä¸åŒçš„æŽ¥å£ã€‚è¦ä½¿å®ƒä¸Žæˆ‘ä»¬çš„çŒŽäººå…¼å®¹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå…¼å®¹çš„é€‚é…å™¨ã€‚

\`\`\`php
// This needs to be added to the game
class WildDog {
    public function bark() {}
}

// Adapter around wild dog to make it compatible with our game
class WildDogAdapter implements Lion {
    protected $dog;

    public function __construct(WildDog $dog) {
        $this->dog = $dog;
    }

    public function roar() {
        $this->dog->bark();
    }
}
\`\`\`

çŽ°åœ¨ \`WildDog\` å¯èƒ½é€šè¿‡ \`WildDogAdapter\` ä½¿ç”¨åˆ°æˆ‘ä»¬çš„æ¸¸æˆä¸­äº†ã€‚

\`\`\`php
$wildDog = new WildDog();
$wildDogAdapter = new WildDogAdapter($wildDog);

$hunter = new Hunter();
$hunter->hunt($wildDogAdapter);
\`\`\`

ðŸš¡ æ¡¥æŽ¥(Bridge)
------

çŽ°å®žæ¡ˆä¾‹
> å‡è®¾ä½ æœ‰ä¸€ä¸ªç”±å¤šä¸ªä¸åŒçš„é¡µé¢ç»„æˆçš„ç½‘ç«™ï¼Œç„¶åŽä½ æƒ³è®©ç”¨æˆ·å¯ä»¥ä¿®æ”¹é¡µé¢ä¸»é¢˜é£Žæ ¼ã€‚é‚£ä¹ˆä½ ä¼šæ€Žä¹ˆåšï¼Ÿæ˜¯ä¸ºæ¯ä¸€ä¸ªé¡µé¢é’ˆå¯¹æ¯ä¸€ä¸ªä¸»é¢˜é£Žæ ¼éƒ½åˆ›å»ºä¸€ä¸ªå¤æœ¬ï¼Œè¿˜æ˜¯åªåˆ›å»ºåˆ†ç¦»çš„ä¸»é¢˜é£Žæ ¼ï¼Œç„¶åŽæ ¹æ®ç”¨æˆ·çš„å–œå¥½åŠ è½½ä¸»é¢˜é£Žæ ¼ï¼Ÿå¦‚æžœä½ æƒ³ç”¨ç¬¬äºŒç§åŠžæ³•ï¼Œé‚£ä¹ˆæ¡¥æŽ¥æ¨¡å¼å°±æ˜¯ä½ çš„è§£å†³ä¹‹é“ã€‚

![With and without the bridge pattern](https://cloud.githubusercontent.com/assets/11269635/23065293/33b7aea0-f515-11e6-983f-98823c9845ee.png)

ç®€å•æ¥è¯´
> æ¡¥æŽ¥æ¨¡å¼è®¤ä¸ºç»„åˆä¼˜äºŽç»§æ‰¿ã€‚å®ƒèƒ½å°†ä¸€ä¸ªå±‚çº§ç»“æž„ä¸­çš„å®žçŽ°ç»†èŠ‚è½¬åˆ°ä½äºŽå¦ä¸€ä¸ªåˆ†ç¦»çš„å±‚çº§ç»“æž„çš„å¯¹è±¡ä¸­ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> æ¡¥æŽ¥æ¨¡å¼æ˜¯è½¯ä»¶è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒæ„åœ¨ â€å°†æŠ½è±¡ä¸ŽçœŸå®žçŽ°åˆ†ç¦»ï¼Œä»Žè€Œä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹çš„å˜åŒ–â€œã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å®žçŽ°ä¸Šé¢çš„ç½‘ç«™çš„ä¾‹å­ï¼Œè¿™é‡Œå®šä¹‰äº† \`WebPage\` çš„å±‚çº§ç»“æž„

\`\`\`php
interface WebPage {
    public function __construct(Theme $theme);
    public function getContent();
}

class About implements WebPage {
    protected $theme;

    public function __construct(Theme $theme) {
        $this->theme = $theme;
    }

    public function getContent() {
        return "About page in " . $this->theme->getColor();
    }
}

class Careers implements WebPage {
   protected $theme;

   public function __construct(Theme $theme) {
       $this->theme = $theme;
   }

   public function getContent() {
       return "Careers page in " . $this->theme->getColor();
   }
}
\`\`\`

ç„¶åŽæ˜¯å¦å¤–åˆ†ç¦»çš„ä¸»é¢˜é£Žæ ¼å±‚çº§ç»“æž„

\`\`\`php
interface Theme {
    public function getColor();
}

class DarkTheme implements Theme {
    public function getColor() {
        return 'Dark Black';
    }
}
class LightTheme implements Theme {
    public function getColor() {
        return 'Off white';
    }
}
class AquaTheme implements Theme {
    public function getColor() {
        return 'Light blue';
    }
}
\`\`\`

æœ€åŽå°†ä¸¤ä¸ªå±‚çº§ç»“æž„ç»„åˆèµ·æ¥

\`\`\`php
$darkTheme = new DarkTheme();

$about = new About($darkTheme);
$careers = new Careers($darkTheme);

echo $about->getContent(); // "About page in Dark Black";
echo $careers->getContent(); // "Careers page in Dark Black";
\`\`\`

ðŸŒ¿ ç»„åˆ(Composite)
-----------------

çŽ°å®žæ¡ˆä¾‹
> æ¯ä¸ªç»„ç»‡éƒ½ç”±å‘˜å·¥ç»„æˆã€‚æ¯ä¸ªå‘˜å·¥éƒ½æœ‰ç›¸ä¼¼çš„ç‰¹å¾ï¼Œå¦‚éƒ½æœ‰å·¥èµ„ï¼Œéƒ½æ‹…è´Ÿä¸€äº›èŒè´£ï¼Œéœ€è¦ï¼ˆæˆ–è€…ä¸éœ€è¦ï¼‰å‘æŸäººæ±‡æŠ¥ï¼Œæœ‰ï¼ˆæˆ–è€…æ²¡æœ‰ï¼‰ä¸€äº›ä¸‹å±žç­‰ã€‚

ç®€å•æ¥è¯´
> ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·èƒ½ä»¥ç»Ÿä¸€çš„æ–¹å¼å¯¹å¾…æ¯ä¸ªå¯¹è±¡ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç»„åˆæ¨¡å¼æ˜¯ä¸€ç§åˆ†å‰²å¼çš„è®¾è®¡æ¨¡å¼ã€‚ç»„åˆæ¨¡å¼æè¿°ä¸ºï¼šèƒ½ä»¥å’Œå¯¹å¾…å•ä¸ªå¯¹è±¡å®žä¾‹ç›¸åŒçš„æ–¹å¼å¯¹å¾…å¯¹è±¡çš„ç»„åˆã€‚ç»„åˆä¸ºçš„æ˜¯å°†å¯¹è±¡ç»„ç»‡æˆæ ‘çŠ¶ç»“æž„ï¼Œä»¥è¡¨è¾¾ *éƒ¨åˆ†-æ•´ä½“* çš„å±‚çº§å…³ç³»ã€‚ä½¿ç”¨ç»„åˆæ¨¡å¼åŽï¼Œå®¢æˆ·å°±èƒ½ä¸€è‡´åœ°å¯¹å¾…å•ç‹¬å¯¹è±¡å’Œç»„åˆä½“äº†ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä½¿ç”¨ä¸Šé¢çš„å‘˜å·¥çš„ä¾‹å­ã€‚è¿™é‡Œå®šä¹‰äº†ä¸åŒç±»åž‹çš„å‘˜å·¥

\`\`\`php
interface Employee {
    public function __construct(string $name, float $salary);
    public function getName() : string;
    public function setSalary(float $salary);
    public function getSalary() : float;
    public function getRoles()  : array;
}

class Developer implements Employee {

    protected $salary;
    protected $name;

    public function __construct(string $name, float $salary) {
        $this->name = $name;
        $this->salary = $salary;
    }

    public function getName() : string {
        return $this->name;
    }

    public function setSalary(float $salary) {
        $this->salary = $salary;
    }

    public function getSalary() : float {
        return $this->salary;
    }

    public function getRoles() : array {
        return $this->roles;
    }
}

class Designer implements Employee {

    protected $salary;
    protected $name;

    public function __construct(string $name, float $salary) {
        $this->name = $name;
        $this->salary = $salary;
    }

    public function getName() : string {
        return $this->name;
    }

    public function setSalary(float $salary) {
        $this->salary = $salary;
    }

    public function getSalary() : float {
        return $this->salary;
    }

    public function getRoles() : array {
        return $this->roles;
    }
}
\`\`\`

å†å®šä¹‰ä¸€ä¸ªç»„ç»‡ï¼Œå®ƒç”±ä¸åŒç±»åž‹çš„å‘˜å·¥ç»„æˆ

\`\`\`php
class Organization {

    protected $employees;

    public function addEmployee(Employee $employee) {
        $this->employees[] = $employee;
    }

    public function getNetSalaries() : float {
        $netSalary = 0;

        foreach ($this->employees as $employee) {
            $netSalary += $employee->getSalary();
        }

        return $netSalary;
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
// Prepare the employees
$john = new Developer('John Doe', 12000);
$jane = new Designer('Jane', 10000);

// Add them to organization
$organization = new Organization();
$organization->addEmployee($john);
$organization->addEmployee($jane);

echo "Net salaries: " . $organization->getNetSalaries(); // Net Salaries: 22000
\`\`\`

â˜• è£…é¥°å™¨(Decorator)
-------------

çŽ°å®žæ¡ˆä¾‹

> å‡è®¾ä½ è¿è¥ä¸€å®¶èƒ½æä¾›å¤šç§æœåŠ¡çš„æ±½è½¦æœåŠ¡åº—ã€‚çŽ°åœ¨ä½ æ€Žæ ·è®¡ç®—è¦æ”¶çš„è´¹ç”¨ï¼Ÿä½ ä¼šæ ¹æ®æä¾›äº†çš„æ‰€æœ‰æœåŠ¡ï¼Œå°†æ¯é¡¹æœåŠ¡è´¹ç”¨éƒ½åŠ¨æ€å åŠ è¿›åŽ»ï¼Œç›´åˆ°ç®—å‡ºæ€»é¢ã€‚è¿™é‡Œæ¯ç§æœåŠ¡éƒ½æ˜¯ä¸€ç§è£…é¥°å™¨ã€‚

ç®€å•æ¥è¯´
> è£…é¥°å™¨æ¨¡å¼é€šè¿‡å°†å¯¹è±¡å°è£…åœ¨è£…é¥°å™¨ç±»çš„å¯¹è±¡ä¸­ï¼Œä»Žè€Œä½¿ä½ èƒ½åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ä¿®æ”¹åŽŸå¯¹è±¡çš„è¡Œä¸ºã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè£…é¥°å™¨è¿™ç§è®¾è®¡æ¨¡å¼å…è®¸ä»¥é™æ€æˆ–è€…åŠ¨æ€çš„æ–¹å¼ï¼Œå°†è¡Œä¸ºæ·»åŠ åˆ°æŸä¸ªå¯¹è±¡ä¸­ï¼Œè€Œè¿™ç§ä¿®æ”¹ä¸ä¼šå½±å“ç›¸åŒç±»ä¸­çš„å…¶å®ƒå®žä¾‹å¯¹è±¡çš„è¡Œä¸ºã€‚è£…é¥°å™¨æ¨¡å¼é€šå¸¸å¯¹äºŽéµå¾ªå•ä¸€èŒè´£åŽŸåˆ™(Single Responsibility Principle)å¾ˆæœ‰ç”¨, å› ä¸ºå®ƒå…è®¸åŠŸèƒ½åœ¨ç±»é—´è¿›è¡Œåˆ’åˆ†ï¼Œä½¿å¾—å„ä¸ªç±»åªä¸“æ³¨å„è‡ªçš„åŠŸèƒ½é¢†åŸŸã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥å’–å•¡ä¸ºä¾‹ã€‚é¦–å…ˆä¸ºç®€å•å’–å•¡å®žçŽ°å’–å•¡æŽ¥å£

\`\`\`php
interface Coffee {
    public function getCost();
    public function getDescription();
}

class SimpleCoffee implements Coffee {

    public function getCost() {
        return 10;
    }

    public function getDescription() {
        return 'Simple coffee';
    }
}
\`\`\`

æˆ‘ä»¬æƒ³ä½¿ä»£ç å¯æ‰©å±•ï¼Œå…è®¸åœ¨éœ€è¦çš„æ—¶å€™èƒ½å¤Ÿä¿®æ”¹é€‰é¡¹ã€‚è®©æˆ‘ä»¬å¢žåŠ ä¸€äº›æ·»åŠ ç‰©ï¼ˆè£…é¥°å™¨ï¼‰

\`\`\`php
class MilkCoffee implements Coffee {

    protected $coffee;

    public function __construct(Coffee $coffee) {
        $this->coffee = $coffee;
    }

    public function getCost() {
        return $this->coffee->getCost() + 2;
    }

    public function getDescription() {
        return $this->coffee->getDescription() . ', milk';
    }
}

class WhipCoffee implements Coffee {

    protected $coffee;

    public function __construct(Coffee $coffee) {
        $this->coffee = $coffee;
    }

    public function getCost() {
        return $this->coffee->getCost() + 5;
    }

    public function getDescription() {
        return $this->coffee->getDescription() . ', whip';
    }
}

class VanillaCoffee implements Coffee {

    protected $coffee;

    public function __construct(Coffee $coffee) {
        $this->coffee = $coffee;
    }

    public function getCost() {
        return $this->coffee->getCost() + 3;
    }

    public function getDescription() {
        return $this->coffee->getDescription() . ', vanilla';
    }
}
\`\`\`

çŽ°åœ¨å¯ä»¥åˆ¶ä½œå’–å•¡äº†

\`\`\`php
$someCoffee = new SimpleCoffee();
echo $someCoffee->getCost(); // 10
echo $someCoffee->getDescription(); // Simple Coffee

$someCoffee = new MilkCoffee($someCoffee);
echo $someCoffee->getCost(); // 12
echo $someCoffee->getDescription(); // Simple Coffee, milk

$someCoffee = new WhipCoffee($someCoffee);
echo $someCoffee->getCost(); // 17
echo $someCoffee->getDescription(); // Simple Coffee, milk, whip

$someCoffee = new VanillaCoffee($someCoffee);
echo $someCoffee->getCost(); // 20
echo $someCoffee->getDescription(); // Simple Coffee, milk, whip, vanilla
\`\`\`

ðŸ“¦ å¤–è§‚(Facade)
----------------

çŽ°å®žæ¡ˆä¾‹
> ä½ æ˜¯æ€Žæ ·å¼€ç”µè„‘çš„ï¼Ÿ "æŒ‰ç”µæºé”®" ä½ è¯´ï¼ä½ ç›¸ä¿¡é‚£æ ·ä¸€å®šå¯ä»¥ï¼Œè¿™æ˜¯ç”±äºŽä½ æ­£åœ¨ä½¿ç”¨ç”µè„‘å¤–éƒ¨çš„ä¸€ä¸ªç®€å•æŽ¥å£ï¼Œè€Œå…¶å†…éƒ¨åˆ™éœ€è¦å®Œæˆå¤§é‡å·¥ä½œæ‰èƒ½å®žçŽ°å¼€æœºã€‚è¿™ä¸ªé’ˆå¯¹å¤æ‚å­ç³»ç»Ÿè€Œè®¾è®¡çš„ç®€å•æŽ¥å£å°±æ˜¯å¤–è§‚ã€‚

ç®€å•æ¥è¯´
> å¤–è§‚æ¨¡å¼ä¸ºå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€åŒ–æŽ¥å£ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> å¤–è§‚å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¸ºæ›´å¤§è§„æ¨¡çš„ä»£ç ï¼Œå¦‚ç±»åº“ç­‰æä¾›ç®€åŒ–çš„æŽ¥å£ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä½¿ç”¨ä¸Šé¢çš„ç”µè„‘çš„ä¾‹å­ã€‚çŽ°åœ¨å…ˆå®šä¹‰ç”µè„‘ç±»

\`\`\`php
class Computer {

    public function getElectricShock() {
        echo "Ouch!";
    }

    public function makeSound() {
        echo "Beep beep!";
    }

    public function showLoadingScreen() {
        echo "Loading..";
    }

    public function bam() {
        echo "Ready to be used!";
    }

    public function closeEverything() {
        echo "Bup bup bup buzzzz!";
    }

    public function sooth() {
        echo "Zzzzz";
    }

    public function pullCurrent() {
        echo "Haaah!";
    }
}
\`\`\`

è¿™æ ·å®šä¹‰å¤–è§‚

\`\`\`php
class ComputerFacade
{
    protected $computer;

    public function __construct(Computer $computer) {
        $this->computer = $computer;
    }

    public function turnOn() {
        $this->computer->getElectricShock();
        $this->computer->makeSound();
        $this->computer->showLoadingScreen();
        $this->computer->bam();
    }

    public function turnOff() {
        $this->computer->closeEverything();
        $this->computer->pullCurrent();
        $this->computer->sooth();
    }
}
\`\`\`

çŽ°åœ¨è¿™æ ·ä½¿ç”¨å¤–è§‚

\`\`\`php
$computer = new ComputerFacade(new Computer());
$computer->turnOn(); // Ouch! Beep beep! Loading.. Ready to be used!
$computer->turnOff(); // Bup bup buzzz! Haah! Zzzzz
\`\`\`

ðŸƒ äº«å…ƒ(Flyweight)
---------

çŽ°å®žæ¡ˆä¾‹
> ä½ æœ‰è¿‡åœ¨æ‘Šä½ä¸Šå“å°è¿‡æ–°èŒ¶å—ï¼Ÿä»–ä»¬é€šå¸¸æ²å‡ºæ¯”ä½ æ‰€è¦çš„è¿˜è¦å¤šçš„æ¯æ•°ï¼Œç„¶åŽå°†å¤šä½™çš„è¼ç•™ç»™å…¶ä»–å®¢äººï¼Œä»Žè€Œèµ·åˆ°èŠ‚çº¦èµ„æºï¼ˆå¦‚ç‡ƒæ°”ï¼‰çš„ç›®çš„ã€‚äº«å…ƒæ¨¡å¼çš„å…¨éƒ¨å³å…±äº«ã€‚

ç®€å•æ¥è¯´
> å®ƒèƒ½ä½¿ç›¸ä¼¼å¯¹è±¡é—´é€šè¿‡å°½å¯èƒ½å¤šåœ°å…±äº«ï¼Œä»¥å‡å°‘å†…å­˜ä½¿ç”¨å’Œè®¡ç®—èŠ±é”€ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œäº«å…ƒæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚ä¸€ä¸ªäº«å…ƒå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒé€šè¿‡ä¸Žå…¶å®ƒç›¸ä¼¼å¯¹è±¡å…±äº«å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œä»¥è¾¾åˆ°å¯¹å†…å­˜çš„æœ€å°‘åŒ–ä½¿ç”¨;å®ƒé€‚ç”¨äºŽå¯¹è±¡æ•°é‡åºžå¤§çš„æƒ…å†µï¼Œæ­¤æ—¶ç®€å•åœ°é‡å¤è¡¨ç¤ºå°†éœ€è¦è¿‡é‡çš„å†…å­˜é‡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å®žçŽ°ä»¥ä¸Šçš„èŒ¶çš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰å„ç§èŒ¶å’ŒèŒ¶è‰ºå¸ˆ

\`\`\`php
// Anything that will be cached is flyweight.
// Types of tea here will be flyweights.
class KarakTea {
}

// Acts as a factory and saves the tea
class TeaMaker {
    protected $availableTea = [];

    public function make($preference) {
        if (empty($this->availableTea[$preference])) {
            $this->availableTea[$preference] = new KarakTea();
        }

        return $this->availableTea[$preference];
    }
}
\`\`\`

ç„¶åŽå®šä¹‰ \`TeaShop\`ï¼Œæä¾›é¥®èŒ¶æœåŠ¡

\`\`\`php
class TeaShop {

    protected $orders;
    protected $teaMaker;

    public function __construct(TeaMaker $teaMaker) {
        $this->teaMaker = $teaMaker;
    }

    public function takeOrder(string $teaType, int $table) {
        $this->orders[$table] = $this->teaMaker->make($teaType);
    }

    public function serve() {
        foreach($this->orders as $table => $tea) {
            echo "Serving tea to table# " . $table;
        }
    }
}
\`\`\`

å¯ä»¥å¦‚ä¸‹ä½¿ç”¨

\`\`\`php
$teaMaker = new TeaMaker();
$shop = new TeaShop($teaMaker);

$shop->takeOrder('less sugar', 1);
$shop->takeOrder('more milk', 2);
$shop->takeOrder('without sugar', 5);

$shop->serve();
// Serving tea to table# 1
// Serving tea to table# 2
// Serving tea to table# 5
\`\`\`

ðŸŽ± ä»£ç†(Proxy)
-------------------

çŽ°å®žæ¡ˆä¾‹
> ä½ æœ‰ç”¨è¿‡é—¨ç¦å¡å¼€è¿‡é—¨å—ï¼Ÿæ‰“å¼€é—¨æœ‰å¤šç§æ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨é—¨ç¦é—¨æˆ–è€…ä½¿ç”¨å¯†ç é”ç­‰ã€‚é—¨çš„ä¸»è¦åŠŸèƒ½æ˜¯æ‰“é—¨ï¼Œä½†åœ¨æ­¤ä¹‹ä¸Šè¿˜åŠ äº†ä¸ªä»£ç†ï¼Œå®ƒå¢žåŠ äº†é¢å¤–çš„ä¸€äº›åŠŸèƒ½ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹çš„ä»£ç ç¤ºä¾‹æ¥æ›´å¥½åœ°è§£é‡Šã€‚

ç®€å•æ¥è¯´
> ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œä¸€ä¸ªç±»å¯ä»¥ä»£è¡¨å…¶å®ƒç±»çš„åŠŸèƒ½ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> ä¸€ä¸ªä»£ç†ï¼Œå…¶æœ€ä¸€èˆ¬çš„å½¢å¼ï¼Œå°±æ˜¯ä½œä¸ºå…¶å®ƒç±»çš„æŽ¥å£çš„ä¸€ä¸ªç±»ã€‚ä»£ç†å°±æ˜¯ä¸€ä¸ªåŒ…è£…æˆ–ä¸­ä»‹å¯¹è±¡ï¼Œå®¢æˆ·é€šè¿‡è°ƒç”¨å®ƒæ¥è®¿é—®å¹•åŽçœŸæ­£æä¾›æœåŠ¡çš„å¯¹è±¡ã€‚ä½¿ç”¨ä»£ç†å¯ä»¥ç®€å•åœ°è½¬å‘åˆ°çœŸå®žå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æä¾›é¢å¤–çš„é€»è¾‘ã€‚ä»£ç†å¯ä»¥æä¾›è¿™äº›é¢å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å½“åœ¨çœŸå®žå¯¹è±¡ä¸Šçš„æ“ä½œéœ€è¦å¤§é‡èµ„æºæ—¶è¿›è¡Œç¼“å­˜ï¼Œæˆ–è€…å¯¹çœŸå®žå¯¹è±¡è°ƒç”¨æ“ä½œæ—¶å…ˆæ£€æŸ¥å…ˆå†³æ¡ä»¶ç­‰ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä½¿ç”¨ä»¥ä¸Šçš„å®‰å…¨é—¨çš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰é—¨çš„æŽ¥å£å¹¶å®žçŽ°é—¨çš„ç±»

\`\`\`php
interface Door {
    public function open();
    public function close();
}

class LabDoor implements Door {
    public function open() {
        echo "Opening lab door";
    }

    public function close() {
        echo "Closing the lab door";
    }
}
\`\`\`

ç„¶åŽå®šä¹‰ä»£ç†ï¼Œä¸ºé—¨æä¾›å®‰å…¨æŽªæ–½

\`\`\`php
class Security {
    protected $door;

    public function __construct(Door $door) {
        $this->door = $door;
    }

    public function open($password) {
        if ($this->authenticate($password)) {
            $this->door->open();
        } else {
        	echo "Big no! It ain't possible.";
        }
    }

    public function authenticate($password) {
        return $password === '$ecr@t';
    }

    public function close() {
        $this->door->close();
    }
}
\`\`\`

è¿™é‡Œæ˜¯å¦‚ä½•ä½¿ç”¨

\`\`\`php
$door = new Security(new LabDoor());
$door->open('invalid'); // Big no! It ain't possible.

$door->open('$ecr@t'); // Opening lab door
$door->close(); // Closing lab door
\`\`\`

å¦ä¸€ä¸ªä¾‹å­æ˜¯ä¸€äº›æ•°æ®æ˜ å°„(data-mapper)çš„å®žçŽ°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ï¼ˆåŽŸä½œè€…ï¼‰ä½¿ç”¨è¯¥æ¨¡å¼ä¸º MongoDB åšäº†ä¸€ä¸ªå¯¹è±¡æ•°æ®æ˜ å°„å™¨(ODM, Object Data Mapper)ï¼Œæˆ‘é€šè¿‡åœ¨ mongo ç±»å¤–ç¼–å†™ä¸€ä¸ªä»£ç†æ¥è°ƒç”¨ç‰¹æ®Šå‡½æ•° \`__call()\`ã€‚å¯¹ä»£ç†çš„æ‰€æœ‰æ–¹æ³•å‡½æ•°éƒ½è½¬åˆ°åŽŸ mongo ç±»ä¸Šï¼Œå¹¶ä¸”å–å¾—çš„ç»“æžœä¹Ÿéƒ½åŽŸæ ·è¿”å›žï¼Œé™¤äº† \`find\` æˆ– \`findOne\` çš„æ•°æ®ä¼šæ˜ å°„æˆæ‰€éœ€çš„ç±»å¯¹è±¡å¹¶è¿”å›žï¼Œè€Œä¸ä»¥ \`Cursor\` è¿”å›žã€‚

è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼
==========================

ç®€å•æ¥è¯´
> å®ƒå…³æ³¨äºŽå¯¹è±¡é—´çš„èŒè´£åˆ†é…ã€‚å®ƒä»¬ä¸Žç»“æž„åž‹æ¨¡å¼çš„åŒºåˆ«åœ¨äºŽï¼šå®ƒä»¬ä¸åªæŒ‡å®šç»“æž„ï¼Œè¿˜å‹¾ç”»å‡ºäº†ç›¸äº’é—´çš„æ¶ˆæ¯ä¼ é€/é€šä¿¡æ¨¡å¼ã€‚æˆ–è€…ä¹Ÿå¯ä»¥è¯´ï¼Œå®ƒä»¬æœ‰åŠ©äºŽå›žç­” "å¦‚ä½•åœ¨è½¯ä»¶ç»„ä»¶ä¸­å®žçŽ°è¡Œä¸ºï¼Ÿ"

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼æ ‡è¯†äº†å¯¹è±¡é—´çš„å¸¸è§é€šä¿¡æ¨¡å¼åŠå…¶å®žçŽ°æ¨¡å¼ã€‚é€šè¿‡è¿™æ ·ï¼Œè¿™äº›æ¨¡å¼å¢žåŠ äº†å®žæ–½æ­¤ç§é€šä¿¡çš„çµæ´»æ€§ã€‚

* [è´£ä»»é“¾(Chain of Responsibility)](#-è´£ä»»é“¾chain-of-responsibility)
* [å‘½ä»¤(Command)](#-å‘½ä»¤command)
* [è¿­ä»£å™¨(Iterator)](#-è¿­ä»£å™¨iterator)
* [ä¸­ä»‹è€…(Mediator)](#-ä¸­ä»‹è€…mediator)
* [å¤‡å¿˜å½•(Memento)](#-å¤‡å¿˜å½•memento)
* [è§‚å¯Ÿè€…(Observer)](#-è§‚å¯Ÿè€…observer)
* [è®¿é—®è€…(Visitor)](#-è®¿é—®è€…visitor)
* [ç­–ç•¥(Strategy)](#-ç­–ç•¥strategy)
* [çŠ¶æ€(State)](#-çŠ¶æ€state)
* [æ¨¡æ¿æ–¹æ³•(Template Method)](#-æ¨¡æ¿æ–¹æ³•template-method)

ðŸ”— è´£ä»»é“¾(Chain of Responsibility)
-----------------------

çŽ°å®žæ¡ˆä¾‹
> ä¾‹å¦‚ï¼Œä½ åœ¨ä½ çš„è´¦æˆ·ä¸­è®¾ç½®äº†ä¸‰ç§æ”¯ä»˜æ–¹å¼ (\`A\`, \`B\` å’Œ \`C\`); æ¯ä¸ªé‡Œé¢éƒ½å­˜æœ‰ä¸åŒçš„é‡‘é¢ã€‚\`A\` é‡Œé¢æœ‰ 100 å…ƒï¼Œ\`B\` é‡Œé¢æœ‰ 300 å…ƒä»¥åŠ \`C\` é‡Œé¢æœ‰ 1000 å…ƒï¼Œå¹¶ä¸”ä½ çš„æ”¯ä»˜åå¥½é€‰æ‹©ä¸ºå…ˆ \`A\` å† \`B\` æœ€åŽ \`C\`ã€‚ä½ æƒ³è¦è´­ä¹°ä»·æ ¼ä¸º 210 å…ƒçš„å•†å“ã€‚å¦‚ä½•ä½¿ç”¨è´£ä»»é“¾ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šæ£€æŸ¥å¸æˆ· \`A\`ï¼Œçœ‹å®ƒæ˜¯å¦è¶³å¤Ÿæ”¯ä»˜ï¼Œå¦‚ä½•å¯ä»¥é‚£ä¹ˆå®Œæˆæ”¯ä»˜å¹¶ä¸”é“¾æ¡åˆ°æ­¤ç»“æŸã€‚å¦‚æžœä¸èƒ½ï¼Œé‚£ä¹ˆè¯·æ±‚å°†ä¼ å‘æ£€æŸ¥å¸æˆ· \`B\` ä¸­çš„é‡‘é¢ï¼Œå¦‚æžœè¶³å¤Ÿé‚£ä¹ˆé“¾æ¡åˆ°æ­¤ç»“æž„å¦åˆ™è¯·æ±‚å°†ç»§ç»­ä¼ é€’ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„å¤„ç†å¸æˆ·ã€‚è¿™é‡Œ \`A\`, \`B\` å’Œ \`C\` éƒ½æ˜¯é“¾æ¡ä¸­çš„é“¾æŽ¥ç‚¹ï¼Œè€Œè¿™æ•´ä¸ªçŽ°è±¡å°±æ˜¯è´£ä»»é“¾ã€‚

ç®€å•æ¥è¯´
> å®ƒç”¨äºŽåˆ›å»ºä¸€ä¸ªå¯¹è±¡é“¾ã€‚è¯·æ±‚ä»Žä¸€ç«¯è¿›å…¥ï¼Œå¹¶ä»Žä¸€ä¸ªå¯¹è±¡ä¼ é€’åˆ°å¦ä¸€ä¸ªï¼Œç›´è‡³æ‰¾åˆ°é€‚åˆçš„å¤„ç†å¯¹è±¡ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­ï¼Œè´£ä»»é“¾è®¾è®¡æ¨¡å¼ç”±å‘½ä»¤å¯¹è±¡æºå’Œä¸€ç³»åˆ—çš„å¤„ç†å¯¹è±¡ç»„æˆã€‚æ¯ä¸ªå¤„ç†å¯¹è±¡ä¸­éƒ½åŒ…å«æœ‰é€»è¾‘ï¼Œç”¨æ¥å®šä¹‰å®ƒèƒ½å¤„ç½®çš„å‘½ä»¤å¯¹è±¡ç±»åž‹; é‚£äº›ä¸èƒ½å¤„ç½®çš„å…¶å®ƒå‘½ä»¤å¯¹è±¡éƒ½å°†ä¼ é€’ç»™é“¾æ¡ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†å¯¹è±¡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å®žçŽ°ä¸Šé¢çš„å¸æˆ·çš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªåŸºæœ¬çš„å¸æˆ·ç±»ï¼Œå…¶ä¸­åŒ…å«æœ‰å°†å„å¸æˆ·å…³è”èµ·æ¥çš„é€»è¾‘åŠŸèƒ½ï¼Œç„¶åŽå†å®žçŽ°å‡ ç§å¸æˆ·ã€‚

\`\`\`php
abstract class Account {
    protected $successor;
    protected $balance;

    public function setNext(Account $account) {
        $this->successor = $account;
    }

    public function pay(float $amountToPay) {
        if ($this->canPay($amountToPay)) {
            echo sprintf('Paid %s using %s' . PHP_EOL, $amountToPay, get_called_class());
        } else if ($this->successor) {
            echo sprintf('Cannot pay using %s. Proceeding ..' . PHP_EOL, get_called_class());
            $this->successor->pay($amountToPay);
        } else {
            throw Exception('None of the accounts have enough balance');
        }
    }

    public function canPay($amount) : bool {
        return $this->balance >= $amount;
    }
}

class Bank extends Account {
    protected $balance;

    public function __construct(float $balance) {
        $this->balance = $balance;
    }
}

class Paypal extends Account {
    protected $balance;

    public function __construct(float $balance) {
        $this->balance = $balance;
    }
}

class Bitcoin extends Account {
    protected $balance;

    public function __construct(float $balance) {
        $this->balance = $balance;
    }
}
\`\`\`

çŽ°åœ¨ç”¨ä¸Šé¢å®šä¹‰çš„å¸æˆ·ï¼ˆå¦‚ Bank, Paypal, Bitcoin) å‡†å¤‡ä¸€ä¸ªé“¾æ¡

\`\`\`php
// åˆ›å»ºå¦‚ä¸‹çš„ä¸€ä¸ªé“¾æŽ¥
//      $bank->$paypal->$bitcoin
//
// ä¼˜å…ˆä½¿ç”¨é“¶è¡Œå¸æˆ·
//      å¦‚æžœé“¶è¡Œå¸æˆ·æ— æ³•æ”¯ä»˜å†ç”¨ paypal
//      å¦‚æžœ paypal ä¸èƒ½æ”¯æŒå†ç”¨æ¯”ç‰¹å¸

$bank = new Bank(100);          // Bank with balance 100
$paypal = new Paypal(200);      // Paypal with balance 200
$bitcoin = new Bitcoin(300);    // Bitcoin with balance 300

$bank->setNext($paypal);
$paypal->setNext($bitcoin);

// Let's try to pay using the first priority i.e. bank
$bank->pay(259);

// è¾“å‡ºä¼šæ˜¯
// ==============
// Cannot pay using bank. Proceeding ..
// Cannot pay using paypal. Proceeding ..:
// Paid 259 using Bitcoin!
\`\`\`

ðŸ‘® å‘½ä»¤(Command)
-------

çŽ°å®žæ¡ˆä¾‹
> ä¸€ä¸ªå¸¸è§çš„ä¾‹å­å°±æ˜¯åœ¨é¤åŽ…åƒé¥­ã€‚ä½ ï¼ˆå³ \`å®¢æˆ· Client\`ï¼‰è¦æ±‚æœåŠ¡å‘˜ï¼ˆå³ \`è°ƒç”¨è€… Invoker\`ï¼‰ä¸Šèœï¼ˆå³ \`å‘½ä»¤ Command\`ï¼‰ï¼Œè€ŒæœåŠ¡å‘˜åªæ˜¯ç®€å•åœ°å°†ä½ çš„è¯·æ±‚ä¼ è¾¾ç»™åŽ¨å¸ˆï¼ˆå³ \`æŽ¥æ”¶è€… Receiver\`ï¼‰ï¼ŒåŽ¨å¸ˆçŸ¥é“åšå“ªé“èœåŠå¦‚ä½•åšã€‚
> å¦ä¸€ä¸ªä¾‹å­æ˜¯ä½ ï¼ˆå³ \`å®¢æˆ· Client\`ï¼‰ä½¿ç”¨é¥æŽ§å™¨ï¼ˆå³ \`è°ƒç”¨è€… Invoker\`ï¼‰æ‰“å¼€ï¼ˆå³ \`å‘½ä»¤ Command\`ï¼‰ç”µè§†æœºï¼ˆå³ \`æŽ¥æ”¶è€… Receiver\`ï¼‰ã€‚

ç®€å•æ¥è¯´
> å®ƒå…è®¸ä½ åœ¨å¯¹è±¡ä¸­å°è£…è¡Œä¸ºã€‚è¯¥æ¨¡å¼èƒŒåŽçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šæä¾›å°†å®¢æˆ·ä¸ŽæŽ¥æ”¶è€…è§£è€¦çš„æ–¹æ³•ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒç”¨å¯¹è±¡æ¥å°è£…æ‰§è¡ŒåŠ¨ä½œæˆ–ç¨åŽè§¦å‘äº‹ä»¶æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬æ–¹æ³•åï¼Œæ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ä»¥åŠæ–¹æ³•å‚æ•°å€¼ç­‰ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

é¦–å…ˆå®šä¹‰æŽ¥æ”¶è€…ï¼Œå¹¶å®žçŽ°å®ƒæ”¯æŒçš„æ¯ä¸ªè¡Œä¸º

\`\`\`php
// Receiver
class Bulb {
    public function turnOn() {
        echo "Bulb has been lit";
    }

    public function turnOff() {
        echo "Darkness!";
    }
}
\`\`\`

ç„¶åŽå®šä¹‰æ¯ä¸ªå‘½ä»¤éƒ½éœ€è¦å®žçŽ°çš„æŽ¥å£ï¼Œå¹¶å®žçŽ°ä¸€ç»„å‘½ä»¤

\`\`\`php
interface Command {
    public function execute();
    public function undo();
    public function redo();
}

// Command
class TurnOn implements Command {
    protected $bulb;

    public function __construct(Bulb $bulb) {
        $this->bulb = $bulb;
    }

    public function execute() {
        $this->bulb->turnOn();
    }

    public function undo() {
        $this->bulb->turnOff();
    }

    public function redo() {
        $this->execute();
    }
}

class TurnOff implements Command {
    protected $bulb;

    public function __construct(Bulb $bulb) {
        $this->bulb = $bulb;
    }

    public function execute() {
        $this->bulb->turnOff();
    }

    public function undo() {
        $this->bulb->turnOn();
    }

    public function redo() {
        $this->execute();
    }
}
\`\`\`

å†å®šä¹‰ä¸€ä¸ª \`è°ƒç”¨è€… Invoker\`ï¼Œå®¢æˆ·ä¸Žå®ƒäº¤äº’æ¥å¤„ç†ä»»ä½•å‘½ä»¤

\`\`\`php
// Invoker
class RemoteControl {

    public function submit(Command $command) {
        $command->execute();
    }
}
\`\`\`

æœ€åŽçœ‹ä¸‹å®¢æˆ·å¦‚ä½•ä½¿ç”¨

\`\`\`php
$bulb = new Bulb();

$turnOn = new TurnOn($bulb);
$turnOff = new TurnOff($bulb);

$remote = new RemoteControl();
$remote->submit($turnOn); // Bulb has been lit!
$remote->submit($turnOff); // Darkness!
\`\`\`

å‘½ä»¤æ¨¡å¼ä¹Ÿå¯ç”¨ä»¥å®žçŽ°äº‹åŠ¡åž‹ç³»ç»Ÿã€‚å½“ä¸€æ—¦æ‰§è¡Œå‘½ä»¤åŽå°±ä¿å­˜å…¶æ‰§è¡Œè®°å½•ã€‚å¦‚æžœæœ€åŽä¸€ä¸ªå‘½ä»¤ä¹Ÿæ‰§è¡ŒæˆåŠŸäº†ï¼Œé‚£æ ·å¾ˆå¥½ï¼Œå¦åˆ™åªéœ€éåŽ†åŽ†å²è®°å½•ï¼Œå¹¶åœ¨æ‰€æœ‰å®Œæˆäº†çš„å‘½ä»¤ä¸Šæ‰§è¡Œ \`undo\` å³å¯ã€‚

âž¿ è¿­ä»£å™¨(Iterator)
--------

çŽ°å®žæ¡ˆä¾‹
> è€å¼æ”¶éŸ³æœºæ˜¯è¿­ä»£å™¨çš„å¾ˆå¥½çš„ä¾‹å­ï¼Œç”¨æˆ·å¯ä»¥å…ˆä»ŽæŸä¸ªé¢‘é“å¼€å§‹ï¼Œç„¶åŽä½¿ç”¨å‰åŽæŒ‰é”®æ¥éåŽ†å„ä¸ªé¢‘é“ã€‚æˆ–è€…ä»¥ MP3 æ’­æ”¾å™¨æˆ–ç”µè§†æœºä¸ºä¾‹ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å‰åŽæŒ‰é”®æ¥éåŽ†æ­Œæ›²æˆ–é¢‘é“ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬éƒ½æä¾›äº†ä¸€ä¸ªæŽ¥å£ï¼Œæ¥éåŽ†é¢‘é“ï¼Œæ­Œæ›²æˆ–å¹¿æ’­ç”µå°ã€‚

ç®€å•æ¥è¯´
> å®ƒæä¾›äº†ä¸€ç§è®¿é—®å¯¹è±¡å†…æ‰€æœ‰å…ƒç´ çš„æ–¹æ³•ï¼Œè€Œé¿å…æš´éœ²ä½Žå±‚çš„è¡¨ç¤ºæ³•ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå®ƒä½¿ç”¨è¿­ä»£å™¨æ¥éåŽ†å®¹å™¨å¹¶è®¿é—®å®¹å™¨å†…çš„å…ƒç´ ã€‚è¿­ä»£å™¨æ¨¡å¼å°†ç®—æ³•å’Œå®¹å™¨è¿›è¡Œäº†è§£è€¦; ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç®—æ³•å¿…éœ€æ˜¯ç‰¹å®šäºŽå®¹å™¨çš„ï¼Œå› è€Œæ— æ³•è§£è€¦ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

åœ¨ PHP ä¸­å¾ˆå®¹æ˜“ä½¿ç”¨ SPL (æ ‡å‡† PHP åº“) æ¥å®žçŽ°ã€‚å®žçŽ°ä¸Šé¢çš„å¹¿æ’­ç”µå°çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ \`RadioStation\`

\`\`\`php
class RadioStation {
    protected $frequency;

    public function __construct(float $frequency) {
        $this->frequency = $frequency;
    }

    public function getFrequency() : float {
        return $this->frequency;
    }
}
\`\`\`

ç„¶åŽå®šä¹‰è¿­ä»£å™¨

\`\`\`php
use Countable;
use Iterator;

class StationList implements Countable, Iterator {
    /** @var RadioStation[] $stations */
    protected $stations = [];

    /** @var int $counter */
    protected $counter;

    public function addStation(RadioStation $station) {
        $this->stations[] = $station;
    }

    public function removeStation(RadioStation $toRemove) {
        $toRemoveFrequency = $toRemove->getFrequency();
        $this->stations = array_filter($this->stations, function (RadioStation $station) use ($toRemoveFrequency) {
            return $station->getFrequency() !== $toRemoveFrequency;
        });
    }

    public function count() : int {
        return count($this->stations);
    }

    public function current() : RadioStation {
        return $this->stations[$this->counter];
    }

    public function key() {
        return $this->counter;
    }

    public function next() {
        $this->counter++;
    }

    public function rewind() {
        $this->counter = 0;
    }

    public function valid(): bool
    {
        return isset($this->stations[$this->counter]);
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
$stationList = new StationList();

$stationList->addStation(new RadioStation(89));
$stationList->addStation(new RadioStation(101));
$stationList->addStation(new RadioStation(102));
$stationList->addStation(new RadioStation(103.2));

foreach($stationList as $station) {
    echo $station->getFrequency() . PHP_EOL;
}

$stationList->removeStation(new RadioStation(89)); // Will remove station 89
\`\`\`

ðŸ‘½ ä¸­ä»‹è€…(Mediator)
========

çŽ°å®žæ¡ˆä¾‹
> ä¸€ä¸ªå¸¸è§çš„ä¾‹å­å°±æ˜¯å½“ä½ ç”¨æ‰‹æœºä¸Žåˆ«äººé€šè¯æ—¶ï¼Œä½ ä»¬ä¹‹é—´éš”æœ‰ä¸€ä¸ªç½‘ç»œæœåŠ¡æä¾›å•†ï¼Œä½ ä»¬çš„é€šè¯æ˜¯è¦é€šè¿‡å®ƒï¼Œè€Œä¸æ˜¯ç›´æŽ¥ä¼ é€çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ç½‘ç»œæœåŠ¡æä¾›å•†å°±æ˜¯ä¸€ä¸ªä¸­ä»‹è€…ã€‚

ç®€å•æ¥è¯´
> ä¸­ä»‹è€…æ¨¡å¼å¼•å…¥äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å¯¹è±¡ï¼ˆå«ä¸­ä»‹è€… mediator) æ¥æŽ§åˆ¶ä¸¤ä¸ªå¯¹è±¡ï¼ˆå«åŒäº‹ colleagues) é—´çš„äº¤äº’ã€‚å®ƒæœ‰åŠ©äºŽå‡å°‘å½¼æ­¤é€šä¿¡çš„ç±»é—´çš„è€¦åˆæ€§ã€‚å› ä¸ºçŽ°åœ¨å®ƒä»¬æ— éœ€äº†è§£å¯¹æ–¹çš„å®žçŽ°ç»†èŠ‚ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä¸­ä»‹è€…æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯¹ä¸€ç»„å¯¹è±¡å¦‚ä½•äº¤äº’è¿›è¡Œäº†å°è£…ã€‚è¿™ç§æ¨¡å¼è¢«è®¤ä¸ºæ˜¯ä¸€ç§è¡Œä¸ºåž‹æ¨¡å¼ï¼Œå› ä¸ºå®ƒèƒ½æ”¹å˜ç¨‹åºè¿è¡Œæ—¶çš„è¡Œä¸ºã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

è¿™é‡Œæ˜¯ä¸€ä¸ªèŠå¤©å®¤ï¼ˆå³ä¸­ä»‹è€…ï¼‰çš„æœ€ç®€å•çš„ä¾‹å­ï¼Œå…¶ä¸­çš„ç”¨æˆ·ï¼ˆå³åŒäº‹ï¼‰ä¹‹é—´ä¼šç›¸äº’å‘é€æ¶ˆæ¯ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸­ä»‹è€…ï¼ˆå³èŠå¤©å®¤ï¼‰

\`\`\`php
// Mediator
class ChatRoom implements ChatRoomMediator {
    public function showMessage(User $user, string $message) {
        $time = date('M d, y H:i');
        $sender = $user->getName();

        echo $time . '[' . $sender . ']:' . $message;
    }
}
\`\`\`

ç„¶åŽå®šä¹‰ç”¨æˆ·ï¼ˆå³åŒäº‹ï¼‰

\`\`\`php
class User {
    protected $name;
    protected $chatMediator;

    public function __construct(string $name, ChatRoomMediator $chatMediator) {
        $this->name = $name;
        $this->chatMediator = $chatMediator;
    }

    public function getName() {
        return $this->name;
    }

    public function send($message) {
        $this->chatMediator->showMessage($this, $message);
    }
}
\`\`\`

ä½¿ç”¨

\`\`\`php
$mediator = new ChatRoom();

$john = new User('John Doe', $mediator);
$jane = new User('Jane Doe', $mediator);

$john->send('Hi there!');
$jane->send('Hey!');

// Output will be
// Feb 14, 10:58 [John]: Hi there!
// Feb 14, 10:58 [Jane]: Hey!
\`\`\`

ðŸ’¾ å¤‡å¿˜å½•(Memento)
-------

çŽ°å®žæ¡ˆä¾‹
> ä»¥è®¡ç®—å™¨ï¼ˆå³å‘èµ·äºº originatorï¼‰ä¸ºä¾‹ï¼Œå½“ä½ å®Œæˆè®¡ç®—åŽï¼Œæœ€åŽçš„ç»“æžœä¼šè¢«ä¿å­˜åœ¨å†…å­˜ï¼ˆå³å¤‡å¿˜å½• mementoï¼‰ä¸­ï¼Œé‚£æ ·ä½ å°±èƒ½å–å›žå®ƒï¼Œæˆ–è®¸ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›åŠŸèƒ½æŒ‰é”®ï¼ˆå³ç®¡ç†è€… caretakerï¼‰æ¥æ¢å¤å®ƒã€‚

ç®€å•æ¥è¯´
> å¤‡å¿˜å½•æ¨¡å¼å°±æ˜¯å…³äºŽç”¨æŸç§æ–¹å¼èŽ·å–æˆ–ä¿å­˜å¯¹è±¡å½“å‰çŠ¶æ€çš„æ¨¡å¼ï¼Œä»Žè€Œä½¿å¯¹è±¡èƒ½åœ¨ç¨åŽé¡ºåˆ©æ¢å¤ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†å°†å¯¹è±¡æ¢å¤åˆ°å…ˆå‰çŠ¶æ€çš„èƒ½åŠ›ï¼ˆä½¿ç”¨å›žæ»šæ¥æ’¤é”€æ“ä½œï¼‰ã€‚

é€šå¸¸å½“ä½ éœ€è¦æä¾›ä¸€äº›æ’¤é”€åŠŸèƒ½æ—¶éžå¸¸æœ‰ç”¨ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥æ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œå®ƒä¼šä¸æ—¶åœ°ä¿å­˜å½“å‰çŠ¶æ€ï¼Œä»Žè€Œå½“ä½ éœ€è¦æ—¶å¯ä»¥æ¢å¤ã€‚

é¦–å…ˆå®šä¹‰æˆ‘ä»¬çš„å¤‡å¿˜å½•å¯¹è±¡ï¼Œå®ƒèƒ½ç”¨äºŽä¿å­˜ç¼–è¾‘å™¨çš„çŠ¶æ€

\`\`\`php
class EditorMemento {
    protected $content;

    public function __construct(string $content) {
        $this->content = $content;
    }

    public function getContent() {
        return $this->content;
    }
}
\`\`\`

ç„¶åŽå®šä¹‰ç¼–è¾‘å™¨ï¼ˆå³å‘èµ·äºº originatorï¼‰ï¼Œå®ƒä¼šç”¨åˆ°å¤‡å¿˜å½•å¯¹è±¡

\`\`\`php
class Editor {
    protected $content = '';

    public function type(string $words) {
        $this->content = $this->content . ' ' . $words;
    }

    public function getContent() {
        return $this->content;
    }

    public function save() {
        return new EditorMemento($this->content);
    }

    public function restore(EditorMemento $memento) {
        $this->content = $memento->getContent();
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
$editor = new Editor();

// Type some stuff
$editor->type('This is the first sentence.');
$editor->type('This is second.');

// Save the state to restore to : This is the first sentence. This is second.
$saved = $editor->save();

// Type some more
$editor->type('And this is third.');

// Output: Content before Saving
echo $editor->getContent(); // This is the first sentence. This is second. And this is third.

// Restoring to last saved state
$editor->restore($saved);

$editor->getContent(); // This is the first sentence. This is second.
\`\`\`

ðŸ˜Ž è§‚å¯Ÿè€…(Observer)
--------

çŽ°å®žæ¡ˆä¾‹
> ä¸€ä¸ªä¸é”™çš„æ¡ˆä¾‹æ˜¯æ±‚èŒè€…ï¼Œä»–ä»¬è®¢é˜…åˆ°ä¸€äº›èŒä½å‘å¸ƒç½‘ç«™ï¼Œç„¶åŽå½“å‡ºçŽ°åŒ¹é…çš„å·¥ä½œæœºä¼šæ—¶ï¼Œä»–ä»¬å°±ä¼šå¾—åˆ°é€šçŸ¥ã€‚

ç®€å•æ¥è¯´
> å®ƒåœ¨å¯¹è±¡é—´å®šä¹‰äº†ä¸€ç§ä¾èµ–å…³ç³»ï¼Œä»Žè€Œå½“æŸä¸ªå¯¹è±¡çš„çŠ¶æ€æ”¹å˜åŽï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå…¶å†…çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆç§°ä¸ºä¸»é¢˜ï¼‰ï¼Œä¼šç»´æŠ¤ä¸€ç»„ä¾èµ–å¯¹è±¡ï¼ˆç§°ä¸ºè§‚å¯Ÿè€…ï¼‰ï¼Œå½“å¯¹è±¡çš„çŠ¶æ€æ”¹å˜åŽï¼Œå®ƒé€šå¸¸é€šè¿‡è°ƒç”¨ä¾èµ–å¯¹è±¡çš„æŸä¸ªå‡½æ•°æ¥è‡ªåŠ¨é€šçŸ¥å®ƒä»¬ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å®žçŽ°ä»¥ä¸Šçš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰æ±‚èŒè€…ï¼Œä»–éœ€è¦å¾—åˆ°å·¥ä½œèŒä½çš„å‘å¸ƒé€šçŸ¥

\`\`\`php
class JobPost {
    protected $title;

    public function __construct(string $title) {
        $this->title = $title;
    }

    public function getTitle() {
        return $this->title;
    }
}

class JobSeeker implements Observer {
    protected $name;

    public function __construct(string $name) {
        $this->name = $name;
    }

    public function onJobPosted(JobPost $job) {
        // Do something with the job posting
        echo 'Hi ' . $this->name . '! New job posted: '. $job->getTitle();
    }
}
\`\`\`

å†å®šä¹‰å·¥ä½œèŒä½å‘å¸ƒç½‘ç«™ï¼Œæ±‚èŒè€…å°†ä¼šè®¢é˜…

\`\`\`php
class JobPostings implements Observable {
    protected $observers = [];

    protected function notify(JobPost $jobPosting) {
        foreach ($this->observers as $observer) {
            $observer->onJobPosted($jobPosting);
        }
    }

    public function attach(Observer $observer) {
        $this->observers[] = $observer;
    }

    public function addJob(JobPost $jobPosting) {
        $this->notify($jobPosting);
    }
}
\`\`\`

ç„¶åŽè¿™æ ·ä½¿ç”¨

\`\`\`php
// Create subscribers
$johnDoe = new JobSeeker('John Doe');
$janeDoe = new JobSeeker('Jane Doe');

// Create publisher and attach subscribers
$jobPostings = new JobPostings();
$jobPostings->attach($johnDoe);
$jobPostings->attach($janeDoe);

// Add a new job and see if subscribers get notified
$jobPostings->addJob(new JobPost('Software Engineer'));

// Output
// Hi John Doe! New job posted: Software Engineer
// Hi Jane Doe! New job posted: Software Engineer
\`\`\`

ðŸƒ è®¿é—®è€…(Visitor)
-------

çŽ°å®žæ¡ˆä¾‹
> è€ƒè™‘åˆ°è¿ªæ‹œæ—…æ¸¸çš„ä¾‹å­ã€‚æ¸¸å®¢åªéœ€é€šè¿‡æŸç§é€”å¾„ï¼ˆä¾‹å¦‚ç­¾è¯ï¼‰è¿›å…¥è¿ªæ‹œã€‚æŠµè¾¾åŽï¼Œä»–ä»¬å°±å¯ä»¥è‡ªå·±åŽ»å‚è§‚è¿ªæ‹œçš„ä»»ä½•åœ°æ–¹ï¼Œè¦å‚è§‚è¿™é‡Œçš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹ï¼Œéƒ½æ— éœ€å†èŽ·å¾—è®¸å¯æˆ–åšä¸€äº›è·‘è…¿çš„å·¥ä½œ; åªéœ€å‘Šè¯‰ä»–ä»¬åœ°å€ï¼Œä»–ä»¬å°±èƒ½åŽ»å‚è§‚ã€‚è®¿é—®è€…æ¨¡å¼ä¹Ÿå…è®¸ä½ é‚£æ ·åšï¼Œå®ƒèƒ½å¸®ä½ æ·»åŠ è¦è®¿é—®çš„åœ°ç‚¹ï¼Œä»Žè€Œä½¿ä½ èƒ½å‚è§‚å°½å¯èƒ½å¤šçš„åœ°æ–¹ï¼Œè€Œæ— éœ€å¦åšé¢å¤–çš„å·¥ä½œã€‚

ç®€å•æ¥è¯´
> è®¿é—®è€…æ¨¡å¼å…è®¸ä½ æ— éœ€è¿›è¡Œä¿®æ”¹å°±èƒ½å°†è¿›ä¸€æ­¥çš„æ“ä½œæ·»åŠ åˆ°å¯¹è±¡ä¸­ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œè½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¿é—®è€…è®¾è®¡æ¨¡å¼æ˜¯å°†ç®—æ³•ä¸Žå…¶æ‰€æ“ä½œçš„å¯¹è±¡ç»“æž„è¿›è¡Œåˆ†ç¦»çš„ä¸€ç§æ–¹æ³•ã€‚è¿™ç§åˆ†ç¦»çš„å®žé™…ç»“æžœæ˜¯ï¼šå…·æœ‰åœ¨ä¸ä¿®æ”¹çŽ°æœ‰å¯¹è±¡ç»“æž„çš„æƒ…å†µä¸‹ï¼Œå°†æ–°æ“ä½œåŠ å…¥åˆ°å¯¹è±¡ç»“æž„ä¸­çš„èƒ½åŠ›ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥ä¸€ä¸ªæ¨¡æ‹ŸåŠ¨ç‰©å›­ä¸ºä¾‹ï¼Œé‡Œé¢æœ‰å¤šç§åŠ¨ç‰©ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦å®ƒä»¬å‘å‡ºå£°éŸ³ã€‚æˆ‘ä»¬å°†ç”¨è®¿é—®è€…æ¨¡å¼å®žçŽ°è¿™ä¸ªä¾‹å­

\`\`\`php
// è¢«è®¿é—®è€…
interface Animal {
    public function accept(AnimalOperation $operation);
}

// è®¿é—®è€…
interface AnimalOperation {
    public function visitMonkey(Monkey $monkey);
    public function visitLion(Lion $lion);
    public function visitDolphin(Dolphin $dolphin);
}
\`\`\`

å†å®žçŽ°ä¸€äº›åŠ¨ç‰©ç±»

\`\`\`php
class Monkey implements Animal {

    public function shout() {
        echo 'Ooh oo aa aa!';
    }

    public function accept(AnimalOperation $operation) {
        $operation->visitMonkey($this);
    }
}

class Lion implements Animal {
    public function roar() {
        echo 'Roaaar!';
    }

    public function accept(AnimalOperation $operation) {
        $operation->visitLion($this);
    }
}

class Dolphin implements Animal {
    public function speak() {
        echo 'Tuut tuttu tuutt!';
    }

    public function accept(AnimalOperation $operation) {
        $operation->visitDolphin($this);
    }
}
\`\`\`

å®žçŽ°è®¿é—®è€…

\`\`\`php
class Speak implements AnimalOperation {
    public function visitMonkey(Monkey $monkey) {
        $monkey->shout();
    }

    public function visitLion(Lion $lion) {
        $lion->roar();
    }

    public function visitDolphin(Dolphin $dolphin) {
        $dolphin->speak();
    }
}
\`\`\`

ç„¶åŽå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
$monkey = new Monkey();
$lion = new Lion();
$dolphin = new Dolphin();

$speak = new Speak();

$monkey->accept($speak);    // Ooh oo aa aa!
$lion->accept($speak);      // Roaaar!
$dolphin->accept($speak);   // Tuut tutt tuutt!
\`\`\`

æˆ‘ä»¬æœ¬å¯ä»¥åªé€šè¿‡åŠ¨ç‰©ç±»çš„ç»§æ‰¿ç»“æž„å®žçŽ°ä¸Šé¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯é‚£ä¹ˆçš„è¯ï¼Œå½“æˆ‘ä»¬éœ€è¦å°†æ–°åŠ¨ä½œæ·»åŠ åˆ°åŠ¨ç‰©ç±»æ—¶ï¼Œå°±å¿…é¡»ä¿®æ”¹åŠ¨ç‰©ç±»ã€‚è€ŒçŽ°åœ¨æˆ‘ä»¬æ— éœ€ä¿®æ”¹å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œå½“è¦æ±‚å°†è·³çš„è¡Œä¸ºåŠ å…¥åŠ¨ç‰©ç±»æ—¶ï¼Œæˆ‘ä»¬åªéœ€ç®€å•åœ°åˆ›å»ºä¸€ä¸ªæ–°è®¿é—®è€…å³å¯ã€‚

\`\`\`php
class Jump implements AnimalOperation {
    public function visitMonkey(Monkey $monkey) {
        echo 'Jumped 20 feet high! on to the tree!';
    }

    public function visitLion(Lion $lion) {
        echo 'Jumped 7 feet! Back on the ground!';
    }

    public function visitDolphin(Dolphin $dolphin) {
        echo 'Walked on water a little and disappeared';
    }
}
\`\`\`

å†è¿™æ ·ä½¿ç”¨

\`\`\`php
$jump = new Jump();

$monkey->accept($speak);   // Ooh oo aa aa!
$monkey->accept($jump);    // Jumped 20 feet high! on to the tree!

$lion->accept($speak);     // Roaaar!
$lion->accept($jump);      // Jumped 7 feet! Back on the ground!

$dolphin->accept($speak);  // Tuut tutt tuutt!
$dolphin->accept($jump);   // Walked on water a little and disappeared
\`\`\`

ðŸ’¡ ç­–ç•¥(Strategy)
--------

çŽ°å®žæ¡ˆä¾‹
> è€ƒè™‘æŽ’åºçš„ä¾‹å­ï¼Œæˆ‘ä»¬å®žçŽ°äº†å†’æ³¡æŽ’åºï¼Œä½†æ˜¯éšç€æ•°æ®å¢žå¤šï¼Œå†’æ³¡æŽ’åºå˜å¾—è¶Šæ¥è¶Šæ…¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆå®žçŽ°äº†å¿«é€ŸæŽ’åºã€‚ä½†æ˜¯çŽ°åœ¨è™½ç„¶å¿«é€ŸæŽ’åºç®—æ³•åœ¨å¤§æ•°æ®é›†ä¸­è¿è¡Œå¾ˆå¥½ï¼Œåœ¨å°æ•°æ®é›†ä¸Šå´å¾ˆæ…¢ã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å®žçŽ°äº†ä¸€ç§ç­–ç•¥ï¼šå°æ•°æ®é›†æ—¶ç”¨å†’æ³¡æŽ’åºï¼Œå¤§æ•°æ®é›†æ—¶ç”¨å¿«é€ŸæŽ’åºã€‚

ç®€å•æ¥è¯´
> ç­–ç•¥æ¨¡å¼å…è®¸ä½ æ ¹æ®æƒ…å†µåˆ‡æ¢ç®—æ³•æˆ–ç­–ç•¥ã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œç­–ç•¥æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºæ”¿ç­–æ¨¡å¼ï¼‰æ˜¯ä¸€ç§è¡Œä¸ºåž‹è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒä½¿å¾—èƒ½åœ¨è¿è¡Œæ—¶é€‰æ‹©ç®—æ³•çš„è¡Œä¸ºã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å®žçŽ°ä¸Šé¢çš„ä¾‹å­ã€‚é¦–å…ˆå®šä¹‰ç­–ç•¥æŽ¥å£ï¼Œå¹¶å®žçŽ°ä¸åŒçš„ç­–ç•¥

\`\`\`php
interface SortStrategy {
    public function sort(array $dataset) : array;
}

class BubbleSortStrategy implements SortStrategy {
    public function sort(array $dataset) : array {
        echo "Sorting using bubble sort";

        // Do sorting
        return $dataset;
    }
}

class QuickSortStrategy implements SortStrategy {
    public function sort(array $dataset) : array {
        echo "Sorting using quick sort";

        // Do sorting
        return $dataset;
    }
}
\`\`\`

ç„¶åŽå®šä¹‰å®¢æˆ·ï¼Œå®ƒèƒ½ä½¿ç”¨ä»»ä½•ä¸€ä¸ªç­–ç•¥

\`\`\`php
class Sorter {
    protected $sorter;

    public function __construct(SortStrategy $sorter) {
        $this->sorter = $sorter;
    }

    public function sort(array $dataset) : array {
        return $this->sorter->sort($dataset);
    }
}
\`\`\`

ç„¶åŽè¿™æ ·ä½¿ç”¨

\`\`\`php
$dataset = [1, 5, 4, 3, 2, 8];

$sorter = new Sorter(new BubbleSortStrategy());
$sorter->sort($dataset); // Output : Sorting using bubble sort

$sorter = new Sorter(new QuickSortStrategy());
$sorter->sort($dataset); // Output : Sorting using quick sort
\`\`\`

ðŸ’¢ çŠ¶æ€(State)
-----

çŽ°å®žæ¡ˆä¾‹
> å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ç»˜ç”»ç¨‹åºï¼Œä½ é€‰æ‹©ç”»ç¬”ç»˜ç”»ã€‚çŽ°åœ¨ç”»ç¬”ä¼šæ ¹æ®æ‰€é€‰çš„é¢œè‰²æ”¹å˜å…¶è¡Œä¸ºï¼Œæ¯”å¦‚å½“ä½ é€‰æ‹©çº¢è‰²åŽå®ƒå°†ç”»å‡ºçº¢è‰²ï¼Œé€‰æ‹©è“è‰²åŽå°†ç”»å‡ºè“è‰²ç­‰ã€‚

ç®€å•æ¥è¯´
> å®ƒèƒ½ä½¿ä½ åœ¨çŠ¶æ€æ”¹å˜åŽä¿®æ”¹ç±»çš„è¡Œä¸ºã€‚

Wikipedia ä¸Šæè¿°ä¸º
> çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºåž‹è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å®žçŽ°äº†ä¸€ä¸ªçŠ¶æ€æœºã€‚åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œé€šè¿‡å°†æ¯ä¸ªå•ç‹¬çŠ¶æ€å®žçŽ°ä¸ºçŠ¶æ€æ¨¡å¼æŽ¥å£çš„ä¸€ä¸ªç»§æ‰¿ç±»ï¼Œè€ŒçŠ¶æ€é—´çš„è½¬å˜é€šè¿‡è°ƒç”¨åœ¨æ¨¡å¼çš„çˆ¶ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ¥å®žçŽ°ï¼Œä»Žè€Œå®žçŽ°ä¸€ä¸ªçŠ¶æ€æœºã€‚
> çŠ¶æ€æ¨¡å¼å¯ä»¥è§£é‡Šä¸ºæ˜¯ä¸€ç§ç­–ç•¥æ¨¡å¼ï¼Œå®ƒèƒ½é€šè¿‡è°ƒç”¨åœ¨æ¨¡å¼æŽ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•æ¥åˆ‡æ¢å½“å‰ç­–ç•¥ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥æ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬ä¿®æ”¹è¾“å…¥æ–‡æœ¬çš„çŠ¶æ€ï¼Œæ¯”å¦‚é€‰æ‹©ç²—ä½“åŽï¼Œå®ƒå°±ä¼šç”¨ç²—ä½“ä¹¦å†™ï¼Œé€‰æ‹©æ–œä½“å°±ä¼šç”¨æ–œä½“ç­‰ã€‚

é¦–å…ˆå®šä¹‰çŠ¶æ€æŽ¥å£ï¼Œå¹¶å®žçŽ°ä¸€äº›çŠ¶æ€ç±»

\`\`\`php
interface WritingState {
    public function write(string $words);
}

class UpperCase implements WritingState {
    public function write(string $words) {
        echo strtoupper($words);
    }
}

class LowerCase implements WritingState {
    public function write(string $words) {
        echo strtolower($words);
    }
}

class Default implements WritingState {
    public function write(string $words) {
        echo $words;
    }
}
\`\`\`

å†å®šä¹‰ç¼–è¾‘å™¨

\`\`\`php
class TextEditor {
    protected $state;

    public function __construct(WritingState $state) {
        $this->state = $state;
    }

    public function setState(WritingState $state) {
        $this->state = $state;
    }

    public function type(string $words) {
        $this->state->write($words);
    }
}
\`\`\`

ç„¶åŽè¿™æ ·ä½¿ç”¨

\`\`\`php
$editor = new TextEditor(new Default());

$editor->type('First line');

$editor->setState(new UpperState());

$editor->type('Second line');
$editor->type('Third line');

$editor->setState(new LowerState());

$editor->type('Fourth line');
$editor->type('Fifth line');

// Output:
// First line
// SECOND LINE
// THIRD LINE
// fourth line
// fifth line
\`\`\`

ðŸ“’ æ¨¡æ¿æ–¹æ³•(Template Method)
---------------

çŽ°å®žæ¡ˆä¾‹
> å‡è®¾æˆ‘ä»¬è¦é€ æˆ¿å­ï¼Œé€ æˆ¿å­çš„æ­¥éª¤çœ‹èµ·æ¥åƒè¿™æ ·:
> - æ‰“åœ°åŸº
> - ç Œå¢™
> - ç›–å±‹é¡¶
> - åŠ ç›–å…¶å®ƒå±‚
>
> è¿™äº›æ­¥éª¤çš„é¡ºåºæ°¸è¿œéƒ½ä¸ä¼šå˜ï¼Œå³ä½ ä¸å¯èƒ½å…ˆç›–å±‹é¡¶å†ç Œå¢™ç­‰ã€‚ä½†æ˜¯æ¯ä¸€æ­¥çš„å…·ä½“æ“ä½œéƒ½æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥ç Œæœ¨å¢™ï¼Œèšé…¯çº¤ç»´å¢™æˆ–è€…çŸ³å¤´å¢™ã€‚

ç®€å•æ¥è¯´
> æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†æŸç‰¹å®šç®—æ³•å¦‚ä½•æ‰§è¡Œçš„æ¡†æž¶ï¼Œä½†æ‰§è¡Œæ­¥éª¤çš„å…·ä½“å®žçŽ°åˆ™æŽ¨è¿Ÿåˆ°å­ç±»ä¸­åŽ»å®Œæˆã€‚

Wikipedia ä¸Šæè¿°ä¸º
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ˜¯è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œå®ƒå®šä¹‰äº†æ“ä½œä¸­çš„æŸä¸ªç®—æ³•çš„ç¨‹åºæ¡†æž¶ï¼Œå¹¶å°†ä¸€äº›æ­¥éª¤æŽ¨è¿Ÿåˆ°å­ç±»ä¸­åŽ»å®žçŽ°ã€‚å®ƒèƒ½åœ¨ä¸ä¿®æ”¹ç®—æ³•ç»“æž„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæž„å»ºå·¥å…·ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ï¼Œä»£ç æ£€æŸ¥ï¼Œæž„å»ºï¼Œç”Ÿæˆæž„å»ºæŠ¥å‘Šï¼ˆæ¯”å¦‚ä»£ç è¦†ç›–çŽ‡æŠ¥å‘Šï¼Œä»£ç æ£€æŸ¥æŠ¥å‘Šç­‰ï¼‰ä»¥åŠéƒ¨ç½²åº”ç”¨è‡³æµ‹è¯•æœåŠ¡å™¨ã€‚

é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŸºç±»ç”¨æ¥æŒ‡å®šæž„å»ºç®—æ³•çš„æ¡†æž¶

\`\`\`php
abstract class Builder {

    // Template method
    public final function build() {
        $this->test();
        $this->lint();
        $this->assemble();
        $this->deploy();
    }

    public abstract function test();
    public abstract function lint();
    public abstract function assemble();
    public abstract function deploy();
}
\`\`\`

ç„¶åŽè¿›è¡Œå„ç§å®žçŽ°

\`\`\`php
class AndroidBuilder extends Builder {
    public function test() {
        echo 'Running android tests';
    }

    public function lint() {
        echo 'Linting the android code';
    }

    public function assemble() {
        echo 'Assembling the android build';
    }

    public function deploy() {
        echo 'Deploying android build to server';
    }
}

class IosBuilder extends Builder {
    public function test() {
        echo 'Running ios tests';
    }

    public function lint() {
        echo 'Linting the ios code';
    }

    public function assemble() {
        echo 'Assembling the ios build';
    }

    public function deploy() {
        echo 'Deploying ios build to server';
    }
}
\`\`\`

æŽ¥ç€ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨

\`\`\`php
$androidBuilder = new AndroidBuilder();
$androidBuilder->build();

// Output:
// Running android tests
// Linting the android code
// Assembling the android build
// Deploying android build to server

$iosBuilder = new IosBuilder();
$iosBuilder->build();

// Output:
// Running ios tests
// Linting the ios code
// Assembling the ios build
// Deploying ios build to server
\`\`\`

## ðŸš¦ Wrap Up Folks

And that about wraps it up. I will continue to improve this, so you might want to watch/star this repository to revisit. Also, I have plans on writing the same about the architectural patterns, stay tuned for it.

## ðŸ‘¬ Contribution

- Report issues
- Open pull request with improvements
- Spread the word
- Reach out to me directly at kamranahmed.se@gmail.com or on twitter [@kamranahmedse](http://twitter.com/kamranahmedse)

## License
MIT Â© [Kamran Ahmed](http://kamranahmed.info)


é¡¹ç›®è¿›åº¦
======

- [x] ç®€ä»‹ (2017-02-24)
- [x] åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ - ç®€å•å·¥åŽ‚ (2017-02-24)
- [x] åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ - å·¥åŽ‚æ–¹æ³• (2017-02-24)
- [x] åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ - æŠ½è±¡å·¥åŽ‚ (2017-02-25)
- [x] åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ - å»ºé€ è€… (2017-02-25)
- [x] åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ - åŽŸåž‹ (2017-02-25)
- [x] åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ - å•ä¾‹ (2017-02-25)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - é€‚é…å™¨ (2017-02-25)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - æ¡¥æŽ¥ (2017-02-26ï¼Œç”± [DashShen](https://github.com/DashShen) ç¿»è¯‘ï¼Œ[haiiiiiyun](https://github.com/haiiiiiyun/) æ ¡å®¡)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - ç»„åˆ (2017-02-26)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - è£…é¥°å™¨ (2017-02-26)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - å¤–è§‚ (2017-02-26)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - äº«å…ƒ (2017-02-27)
- [x] ç»“æž„åž‹è®¾è®¡æ¨¡å¼ - ä»£ç† (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - è´£ä»»é“¾ (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - å‘½ä»¤ (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - è¿­ä»£å™¨ (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - ä¸­ä»‹è€… (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - å¤‡å¿˜å½• (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - è§‚å¯Ÿè€… (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - è®¿é—®è€… (2017-02-28)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - ç­–ç•¥ (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - çŠ¶æ€ (2017-02-27)
- [x] è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ - æ¨¡æ¿æ–¹æ³• (2017-02-27ï¼Œç”± [DashShen](https://github.com/DashShen) ç¿»è¯‘ï¼Œ[haiiiiiyun](https://github.com/haiiiiiyun/) æ ¡å®¡)`;
